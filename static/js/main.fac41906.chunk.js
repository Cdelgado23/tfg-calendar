(this["webpackJsonptfg-calendar"]=this["webpackJsonptfg-calendar"]||[]).push([[0],{43:function(e,n,t){},59:function(e,n,t){},78:function(e,n,t){"use strict";t.r(n);var r,o,a,i,s,c,l,u,d=t(3),h=t.n(d),b=t(29),j=t.n(b),g=(t(59),function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,80)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),o(e),a(e),i(e)}))}),p=(t(43),t(12)),f=h.a.createContext(),m=t(15),x=t(16),v=t(22),O=t(21),y=t(5),S=t(53),k=t(23),F=t(6),w=F.a.nav(r||(r=Object(y.a)(["\n  background: #EFEFEF;\n  height: 10vh;\n  display: flex;\n  justify-content: space-between;\n  z-index: 10;\n"]))),C=Object(F.a)(k.b)(o||(o=Object(y.a)(["\n  color: #fff;\n  background: #F5AB00;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  margin:0 1vw 1vw 0;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #FFFFFF;\n  }\n"]))),E=(Object(F.a)(S.a)(a||(a=Object(y.a)(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 1024px) {\n    display: block;\n    align-items: center;\n    display: flex;\n\n    font-size: 1.8rem;\n    cursor: pointer;\n    justify-self:center;\n  }\n"]))),F.a.select(i||(i=Object(y.a)(["\ndisplay: none;\ncolor: #fff;\n@media screen and (max-width: 1024px) {\n  display: block;\n  align-items: center;\n  display: flex;\n\n  font-size: 1.8rem;\n  cursor: pointer;\n  justify-self:center;\n  background: #2DA283;\n}\n\n"])))),A=F.a.div(s||(s=Object(y.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  @media screen and (max-width: 1024px) {\n    display: none;\n  }\n"]))),D=F.a.nav(c||(c=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  margin: 0 1vw;\n  @media screen and (max-width: 1024px) {\n    display: none;\n  }\n"]))),N=Object(F.a)(k.b)(l||(l=Object(y.a)(["\n  border-radius: 4px;\n  background: #2DA283;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #6cd1b6;\n    color: #010606;\n  }\n"]))),_=Object(F.a)(k.b)(u||(u=Object(y.a)(["\n  border-radius: 4px;\n  background: #F5AB00;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #d69b1b;\n    color: #010606;\n  }\n"]))),T=t(2);var P,M,R,I,W,B,L,U,z,G,H,J,K,Y,V,X,q,Z=function(e){var n=Object(p.f)();Object(p.g)();return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(w,{children:[Object(T.jsx)("div",{style:{"justify-self":"flex-start"},children:Object(T.jsx)(C,{to:"/",children:"Universidad de Extremadura"})}),Object(T.jsxs)(E,{name:"rooms",id:"rooms",onChange:function(e){!function(e,n,t){n.push("/"+e.target.value),e.target.value}(e,n)},children:[Object(T.jsx)("option",{value:"Horario",children:"Horario"}),Object(T.jsx)("option",{value:"Asignaturas",children:"Asignaturas"}),Object(T.jsx)("option",{value:"Aulas",children:"Aulas"})]}),Object(T.jsxs)(A,{children:[Object(T.jsx)(D,{children:Object(T.jsx)(_,{to:"/Horario",children:"Horario"})}),Object(T.jsx)(D,{children:Object(T.jsx)(_,{to:"/Asignaturas",children:"Asignaturas"})}),Object(T.jsx)(D,{children:Object(T.jsx)(_,{to:"/Aulas",children:"Aulas"})})]}),Object(T.jsx)(D,{children:Object(T.jsx)(N,{to:"/Usuario",children:"Profesor Apellido1 Apellido2"})})]})})},Q=t(42),$=t(11),ee=t(51),ne=t.n(ee),te=F.a.div(P||(P=Object(y.a)(["\ndisplay: flex;\nalign-items: flex-end;\njustify-content: space-around;\n\n@media screen and (max-width: 1024px) {\n    flex-direction: column;\n    align-items: center;\n  }\n"]))),re=F.a.div(M||(M=Object(y.a)(["\n  width: 70vw;\n  white-space: nowrap;\n  background:  #FFFFFF;\n\n  @media screen and (max-width: 1024px) {\n    width:100%;\n    order: -9999;\n  }\n"]))),oe=F.a.div(R||(R=Object(y.a)(["\n  display: flex;\n  flex-direction: column; \n  width: 15vw;\n  margin: 0 1vw;\n  white-space: nowrap;\n  align-items: strech;\n  justify-content: stretch; \n\n  @media screen and (max-width: 1024px) {\n    width:100%;\n    height:100%;\n    margin: 0 1%;\n  }\n"]))),ae=F.a.div(I||(I=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  background: #EFEFEF;\n  color: #00000;\n\n  margin: 0.5vh 0;\n  border-radius: 10px 10px 0 0;\n  justify-content: center;\n  padding: 5px 11px;\n"]))),ie=F.a.div(W||(W=Object(y.a)(["\n  display: flex;\n  flex-direction: column; \n  align-items: stretch;\n  white-space: nowrap;\n  padding: 2% 1%;\n  height:70vh;\n  justify-content: flex-start;\n  background: #FFFFFF;\n  border-radius: 0 0 10px 10px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  width:100%;\n  border: 1px solid #EFEFEF;\n\n  @media screen and (max-width: 1024px) {\n    height:100%;\n  }\n"]))),se=(F.a.div(B||(B=Object(y.a)(["\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  padding: 10px 22px;\n  width: 100vw;\n  justify-content: center;\n  background: #EFEFEF;\n  margin: 2px;\n  @media screen and (max-width: 1024px) {\n    background: #FEFEFE;\n  }\n"]))),F.a.button(L||(L=Object(y.a)(["\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border-radius: 3px;\n  outline: none;\n  border: none;\n  background: #2DA283;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #6cd1b6;\n    color: #010606;\n  }\n"])))),ce=F.a.div(U||(U=Object(y.a)(["\n  margin-top: 4vh;\n  height: 6vh;\n  @media screen and (max-width: 1024px) {\n    display: none\n  }\n"]))),le=Object(F.a)(ne.a)(z||(z=Object(y.a)(["\n  height: 200%;\n\n"])));function ue(e){var n=e.active,t=e.children;return Object(T.jsx)(le,{active:n,classNamePrefix:"MyLoader_",spinner:!0,text:"Loading your content...",children:t})}var de=F.a.div(G||(G=Object(y.a)(["\n  display: grid;\n  grid-template-columns: 9% 13% 13% 13% 13% 13% 13% 13%;\n  \n  grid-template-rows: repeat(",", 1fr);\n  justify-items: center;\n\n  width: 100%;\n  height:70vh;\n  border: 1px solid #ccc;\n\n  white-space: nowrap;\n  justify-content: stretch; \n  overflow-y: scroll;\n  overflow-x: hidden;\n\n"])),(function(e){return e.divisions})),he=F.a.div(H||(H=Object(y.a)(["\n  grid-column-start: ",";\n  grid-row-start: ",";\n\n  grid-column-end: ",";\n  grid-row-end: ",";\n  justify-self: stretch;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #FFF;\n\n  min-height: 3rem;\n\n  border-top: 1px solid #EFEFEF;\n\n\n"])),(function(e){return e.column}),(function(e){return e.row}),(function(e){return e.column+1}),(function(e){return e.row+e.size})),be=F.a.button(J||(J=Object(y.a)(["\n  grid-column-start: ",";\n  grid-row-start: ",";\n\n  grid-column-end: ",";\n  grid-row-end: ",";\n  background-color: ",";\n  justify-self: stretch;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  outline: none;\n  border: none;\n  \n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    filter: brightness(85%);\n    color: #010606;\n  }\n  &:active {\n    background: #FFFFFF;\n  }\n\n"])),(function(e){return e.column}),(function(e){return e.row}),(function(e){return e.column+1}),(function(e){return e.row+(e.size||1)}),(function(e){return e.color||"#FFFFFF"})),je=F.a.div.attrs((function(e){return{style:{background:e.background,gridColumnStart:e.column,gridRowStart:e.row,gridColumnEnd:e.column+1,gridRowEnd:e.row+1,borderTop:e.row>1&&e.column>0?"1px solid #EFEFEF":""}}}))(K||(K=Object(y.a)(["justify-self: stretch;\nmin-height: 1rem;\n",";\n"])),(function(e){return e.column>1?"&:hover {transition: all 0.2s ease-in-out;background: #EFEFEF;color: #010606;}":""})),ge=F.a.div(Y||(Y=Object(y.a)(["\n  grid-column-start: ",";\n  grid-row-start: ",";\n\n  grid-column-end: ",";\n  grid-row-end: ",";\n  background-color: ",";\n  justify-self: stretch;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center; \n\n  position: -webkit-sticky; /* Safari */\n  position: sticky;\n  top: 0;\n  border-bottom: 1px solid #EFEFEF;\n\n\n  \n  margin-top:","%;\n  margin-bottom:","%;\n"])),(function(e){return e.column}),(function(e){return e.row}),(function(e){return e.column+1}),(function(e){return e.row+(e.size||1)}),(function(e){return e.color||"#FFFFFF"}),(function(e){return e.marginTop}),(function(e){return e.marginBot})),pe=F.a.div(V||(V=Object(y.a)(["\n  display: flex;\n  flex-direction: row; \n  justify-content: center;\n  align-items: center;\n  \n  width: 100%;\n  height: 5vh;\n"]))),fe=F.a.div(X||(X=Object(y.a)(["\n  margin-right: 5vw;\n  margin-left: auto;\n"]))),me=F.a.div(q||(q=Object(y.a)(["\n    \n  display: flex;\n  flex-direction: row; \n  justify-content: center;\n  align-items: center;\n  justify-self: center;\n  margin-right: 3%;\n"]))),xe=t(79);function ve(e){var n=""+(e.getMonth()+1),t=""+e.getDate(),r=e.getFullYear();return n.length<2&&(n="0"+n),t.length<2&&(t="0"+t),[r,n,t].join("-")}function Oe(e){return Object(T.jsxs)("p",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:[e.subjectName,Object(T.jsx)("br",{}),e.groupName,Object(T.jsx)("br",{}),e.length+" mins"]})}function ye(e,n,t){if(function(e,n){if(e.recurrent){var t=Se(e.startFrom),r=Se(n.selectedWeek);return t[0]===r[0]&&(r[1]-t[1])%e.recurrencePeriod===0}var o=new Date(e.executionDate);console.log(o),o.setHours(0,0,0,0);var a=1,i=!1;return n.week.forEach((function(n){o.getTime()===n.getTime()&&(e.day=a,i=!0),a++})),i}(e,n)){var r=1+((e.startMinute-n.timeStart)/n.mins_x_block>>0),o=e.day+1,a=Math.ceil((e.startMinute+e.length-n.timeStart)/n.mins_x_block)+1-r;return Object(T.jsx)(be,{draggable:"true",onDragStart:function(n){return function(e,n){e.dataTransfer.setData("text",JSON.stringify(n))}(n,e)},row:r+1,column:o,color:e.color,size:a,onClick:function(){t(e)},children:Oe(e)},Object(xe.a)())}console.log(e)}function Se(e){return e.split("-W")}function ke(e,n,t){var r=[];return n.forEach((function(n){r.push(ye(n,e,t))})),r}function Fe(e){var n=e.timeStart/60>>0,t=Math.ceil(60/e.mins_x_block);return Array.from(Array(e.divisions/t).keys()).map((function(e){return Object(T.jsx)(he,{size:t,row:e*t+2,column:1,children:n+e+":00"})}))}var we={1:"Lunes",2:"Martes",3:"Mi\xe9rcoles",4:"Jueves",5:"Viernes",6:"S\xe1bado",7:"Domingo"};function Ce(e,n){var t=8*(e.divisions+1);return Array.from(Array(t).keys()).map((function(t){return Object(T.jsx)(je,{row:1+(t/8>>0),column:t%8+1,onDrop:function(r){return n(r,t,e)},onDragOver:function(e){e.preventDefault()}})}))}function Ee(e,n){var t=new Date(n,0,1+7*(e-1)),r=t.getDay(),o=t;return r<=4?o.setDate(t.getDate()-t.getDay()+1):o.setDate(t.getDate()+8-t.getDay()),o}function Ae(e){var n=[];e.setDate(e.getDate());for(var t=0;t<7;t++){var r=new Date(e);r.setHours(0,0,0,0),n.push(r),e.setDate(e.getDate()+1)}return n}function De(e){var n=new Date(e.getFullYear(),0,1),t=Math.floor((e-n)/864e5);return Math.ceil((e.getDay()+t)/7)-1}function Ne(e){var n,t;return n=new Date(e,0,1),t=1===new Date(e,1,29).getMonth(),4!==n.getDay()&&!t||3!==n.getDay()?52:53}var _e,Te,Pe,Me,Re,Ie=function(e){Object(v.a)(t,e);var n=Object(O.a)(t);function t(e){var r;Object(m.a)(this,t),r=n.call(this,e);var o=new Date;return r.state={mins_x_block:e.mins_x_block,divisions:e.scheduleSize/e.mins_x_block,timeStart:e.timeStart,selectedWeek:o.getFullYear()+"-W"+De(o),week:Ae(Ee(De(o),o.getFullYear()))},r.drop=r.drop.bind(Object($.a)(r)),r.handleWeekChange=r.handleWeekChange.bind(Object($.a)(r)),r.getScheduleInformation=r.getScheduleInformation.bind(Object($.a)(r)),r.handleSessionClick=r.handleSessionClick.bind(Object($.a)(r)),r.changeWeek=r.changeWeek.bind(Object($.a)(r)),r}return Object(x.a)(t,[{key:"handleSessionClick",value:function(e){this.props.handleSessionClick(e)}},{key:"getScheduleInformation",value:function(e,n){var t=n%8,r=((n/8>>0)-1)*this.state.mins_x_block+this.state.timeStart,o=r+e.length,a=this.props.sessions.filter((function(n){return t===n.day&&!function(e,n){return e.id===n.id}(n,e)}));console.log(a);var i=a.filter((function(e){return e.startMinute>r&&e.startMinute<o}));return console.log(i),{schedulable:0===i.length,startMinute:r}}},{key:"drop",value:function(e,n,t){e.preventDefault();var r=JSON.parse(e.dataTransfer.getData("text")),o=ve(t.week[n%8-1]);"group"===r.type&&((r=function(e){var n=e.defaultSessionValues;return n.groupName=e.groupName,n.subjectName=e.subjectName,n.type="group",n}(r)).type="group");var a=function(e){return{type:"session",id:e.id,origin:"drag&drop - session",length:e.length,color:e.color,subjectName:e.subjectName,groupName:e.groupName,recurrent:e.recurrent,endAt:e.endAt,room:e.room,teacher:e.teacher}}(r);a.startMinute=((n/8>>0)-1)*t.mins_x_block+t.timeStart,r.recurrent?(a.day=n%8,a.recurrencePeriod=r.recurrencePeriod,a.startFrom=r.startFrom):a.executionDate=o;var i=this.getScheduleInformation(a,n);!0===i.schedulable&&(a.startMinute=i.startMinute,"session"===r.type?this.props.updateSession(a):"group"===r.type&&this.props.createSession(a))}},{key:"handleWeekChange",value:function(e){var n=e.target.value.split("-W");console.log("INPUT VAL: "+e.target.value);var t=Ee(n[1],n[0]);console.log(t),this.setState({selectedWeek:e.target.value,week:Ae(t)})}},{key:"changeWeek",value:function(e){var n=this.state.selectedWeek.split("-W"),t=parseInt(n[1])+e,r=parseInt(n[0]),o=Ne(r=t<1?r-1:r),a=Ee(t=(t=t<1?o:t)>(o=Ne(r=t>o?r+1:r))?1:t,r);console.log(a),t=t<10?"0"+t:t,console.log(r+"-W"+t),this.setState({selectedWeek:r+"-W"+t,week:Ae(a)})}},{key:"render",value:function(){var e,n=this;return console.log(this.context.sessions),Object(T.jsxs)("div",{children:[Object(T.jsx)(pe,{children:Object(T.jsxs)(me,{children:[Object(T.jsxs)("button",{onClick:function(){n.changeWeek(-1)},children:[" ","<"," "]}),Object(T.jsx)("p",{children:ve(this.state.week[0])+" - "+ve(this.state.week[6])}),Object(T.jsxs)("button",{onClick:function(){n.changeWeek(1)},children:[" ",">"," "]})]})}),Object(T.jsx)(pe,{children:Object(T.jsx)(fe,{children:Object(T.jsx)("input",{type:"week",name:"week",id:"select-week",value:this.state.selectedWeek,required:!0,onChange:function(e){return n.handleWeekChange(e)}})})}),Object(T.jsxs)(de,{divisions:this.state.divisions,children:[Ce(this.state,this.drop),(e=this.state.week,Array.from(Array(7).keys()).map((function(n){return Object(T.jsxs)(ge,{row:1,column:n+2,children:[we[n+1],Object(T.jsx)("br",{}),ve(e[n])]})}))),Fe(this.state),ke(this.state,this.props.sessions,this.handleSessionClick)]})]})}}]),t}(h.a.Component);Ie.contextType=f;var We=F.a.div(_e||(_e=Object(y.a)(["\n  display: flex;\n  flex-direction: column; \n  width: 100%;\n\n  margin: 0.5rem 0 0 0;\n"]))),Be=F.a.button(Te||(Te=Object(y.a)(["\n\n    background: ",";\n    justify-content: center;\n    \n    border-radius: ","; \n    padding: 0.4em;\n    outline: none;\n    border: none;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        background: #6cd1b6;\n        color: #010606;\n    }\n"])),(function(e){return e.color||"#FEFEFE"}),(function(e){return e.ButtonCornersRadius?"4px 4px 4px 4px":"4px 4px 0 0"})),Le=F.a.div(Pe||(Pe=Object(y.a)(["\n    display: ",";\n    flex-direction: column; \n    width: 100%;\n    background: #EFEFEF;\n    border-radius: 0 0 4px 4px;\n"])),(function(e){return e.show?"flex":"none"})),Ue=F.a.button(Me||(Me=Object(y.a)(["\n\n    background: ",";\n    justify-content: center;\n    padding: 0.1em;\n    outline: none;\n    border: none;\n    margin: 0.5vh;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        background: #6cd1b6;\n        color: #010606;\n    }\n"])),(function(e){return e.group.color||"#FEFEFE"}));F.a.button(Re||(Re=Object(y.a)(["\n\n    background: #FFFFFF;\n    justify-content: flex-end;\n    padding: 0.4rem;\n    outline: none;\n    border: none;\n    margin: 2%;\n    border-radius: 0 0 4px 4px;\n\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        background: #6cd1b6;\n        color: #010606;\n    }\n"])));function ze(e){return e.map((function(e){return Object(T.jsx)(Ue,{group:e,draggable:"true",onDragStart:function(n){return function(e,n){e.dataTransfer.setData("text",JSON.stringify(n))}(n,e)},id:e.id,children:e.groupName})}))}var Ge,He,Je,Ke,Ye,Ve=function(e){Object(v.a)(t,e);var n=Object(O.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=n.call(this,e)).state={subject:e.subject,showGroups:!1},r.handleSubjectTitleClick=r.handleSubjectTitleClick.bind(Object($.a)(r)),r}return Object(x.a)(t,[{key:"handleSubjectTitleClick",value:function(){this.setState({showGroups:!this.state.showGroups})}},{key:"render",value:function(){return Object(T.jsxs)(We,{children:[Object(T.jsx)(Be,{onClick:this.handleSubjectTitleClick,ButtonCornersRadius:!this.state.showGroups,color:this.state.subject.color,children:this.state.subject.subjectName}),Object(T.jsx)(Le,{show:this.state.showGroups,children:ze(this.state.subject.groups)})]})}}]),t}(h.a.Component),Xe=t(40),qe=F.a.form(Ge||(Ge=Object(y.a)(["\n  display: flex;\n  flex-direction: column; \n  justify-content: space-around;\n\n  margin: 0 0.5em 2vh 0.5em;\n  "]))),Ze=F.a.input(He||(He=Object(y.a)(["\n  width:100%;\n  margin-bottom: 0.5em;\n"]))),Qe=F.a.div(Je||(Je=Object(y.a)(["\n\n  display: flex;\n  flex-direction: row;\n  margin: 5%;\n  justify-content: space-around; \n  align-items: center;\n\n"]))),$e=F.a.button(Ke||(Ke=Object(y.a)(["\n  border-radius: 4px;\n  background: ",";\n  padding: 5% 10%;\n  color: #FFFF;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #6cd1b6;\n    color: #010606;\n  }\n"])),(function(e){return e.color||"#EFEFEF"})),en=F.a.input(Ye||(Ye=Object(y.a)(["\nborder-radius: 4px;\nbackground: ",";\npadding: 5% 10%;\nmargin:0;\ncolor: #FFFF;\noutline: none;\nborder: none;\ncursor: pointer;\ntransition: all 0.2s ease-in-out;\ntext-decoration: none;\n&:hover {\n  transition: all 0.2s ease-in-out;\n  background: #6cd1b6;\n  color: #010606;\n}\n\n"])),(function(e){return e.color||"#EFEFEF"}));function nn(e,n){var t=e.map((function(e){return Object(T.jsx)("option",{value:e,children:e})}));return Object(T.jsx)("select",{name:"rooms",id:"rooms",onChange:n,children:t})}var tn=function(e){Object(v.a)(t,e);var n=Object(O.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=n.call(this,e)).state={},r.onChangeField=r.onChangeField.bind(Object($.a)(r)),r.onChangeCheckbox=r.onChangeCheckbox.bind(Object($.a)(r)),console.log("selected: "),console.log(r.props.selectedSession),r.props.selectedSession&&(r.state={id:r.props.selectedSession.id,subjectName:r.props.selectedSession.subjectName,groupName:r.props.selectedSession.groupName,startMinute:r.props.selectedSession.startMinute,length:r.props.selectedSession.length,day:r.props.selectedSession.day,executionDate:r.props.selectedSession.executionDate,recurrencePeriod:r.props.selectedSession.recurrencePeriod,recurrent:r.props.selectedSession.recurrent,startFrom:r.props.selectedSession.startFrom,endAt:r.props.selectedSession.endAt,room:r.props.selectedSession.room,teacher:r.props.selectedSession.teacher,color:r.props.selectedSession.color}),r.handleSubmit=r.handleSubmit.bind(Object($.a)(r)),r.updateStateFromSession=r.updateStateFromSession.bind(Object($.a)(r)),r}return Object(x.a)(t,[{key:"updateStateFromSession",value:function(e){this.state.setState({id:e.id,subjectName:e.subjectName,groupName:e.groupName,startMinute:e.startMinute,length:e.length,day:e.day,executionDate:e.executionDate,recurrencePeriod:e.recurrencePeriod,recurrent:e.recurrent,startFrom:e.startFrom,endAt:e.endAt,room:e.room,teacher:e.teacher,color:e.color})}},{key:"componentDidUpdate",value:function(e){e.selectedSession!==this.props.selectedSession&&this.updateStateFromSession(this.props.selectedSession)}},{key:"handleSubmit",value:function(e){e.preventDefault();var n={id:this.state.id,subjectName:this.state.subjectName,groupName:this.state.groupName,startMinute:this.state.startMinute,length:this.state.length,recurrent:this.state.recurrent,room:this.state.room,teacher:this.state.teacher,color:this.state.color};n.recurrent?(n.startFrom=this.state.startFrom,n.endAt=this.state.endAt,n.day=Number(this.state.day),n.recurrencePeriod=Number(this.state.recurrencePeriod)):n.executionDate=this.state.executionDate,console.log("update button"),console.log(n),this.props.updateSession(n),this.setState({id:null})}},{key:"onChangeField",value:function(e,n){console.log(e.target.value),this.setState(Object(Xe.a)({},n,e.target.value))}},{key:"onChangeCheckbox",value:function(e){this.setState((function(n){return Object(Xe.a)({},e,!n[e])}))}},{key:"render",value:function(){var e=this;return this.state.id?Object(T.jsxs)("div",{children:[Object(T.jsxs)(qe,{onSubmit:this.handleSubmit,children:[Object(T.jsx)("label",{children:"Subject"}),Object(T.jsx)(Ze,{disabled:!0,type:"text",name:"subject",value:this.state.subjectName,onChange:function(n){e.onChangeField(n,"subjectName")}}),Object(T.jsx)("label",{children:"Group"}),Object(T.jsx)(Ze,{disabled:!0,type:"text",name:"group",value:this.state.groupName,onChange:function(n){e.onChangeField(n,"groupName")}}),Object(T.jsxs)("label",{children:[Object(T.jsx)("input",{type:"checkbox",name:"recurrent",checked:this.state.recurrent,value:this.state.recurrent,onChange:function(n){e.onChangeCheckbox("recurrent")}}),"Recurrent"]}),!0===this.state.recurrent?Object(T.jsxs)(h.a.Fragment,{children:[Object(T.jsx)("label",{children:"Recurrence Period"}),Object(T.jsx)(Ze,{type:"number",name:"day",value:this.state.recurrencePeriod,onChange:function(n){e.onChangeField(n,"recurrencePeriod")}}),Object(T.jsx)("label",{children:"Day"}),Object(T.jsx)(Ze,{type:"number",name:"day",value:this.state.day,onChange:function(n){e.onChangeField(n,"day")}}),Object(T.jsx)("label",{children:"Start From"}),Object(T.jsx)(Ze,{type:"week",name:"startFrom",value:this.state.startFrom,onChange:function(n){e.onChangeCheckbox(n,"startFrom")}}),Object(T.jsx)("label",{children:"End At"}),Object(T.jsx)(Ze,{type:"week",name:"endAt",value:this.state.endAt,onChange:function(n){e.onChangeCheckbox(n,"endAt")}})]}):Object(T.jsxs)(h.a.Fragment,{children:[Object(T.jsx)("label",{children:"Execution Date"}),Object(T.jsx)(Ze,{type:"date",name:"day",value:this.state.executionDate,onChange:function(n){e.onChangeField(n,"executionDate")}})]}),Object(T.jsx)("label",{children:"Start Time"}),Object(T.jsx)(Ze,{type:"text",name:"startTime",value:this.state.startMinute,onChange:function(n){e.onChangeField(n,"startMinute")}}),Object(T.jsx)("label",{children:"Duration"}),Object(T.jsx)(Ze,{type:"text",name:"length",value:this.state.length,onChange:function(n){e.onChangeField(n,"length")}}),Object(T.jsx)("label",{children:"Room"}),nn(this.props.getAvalibleRooms(this.props.selectedSession),this.onChangeField),Object(T.jsx)("br",{}),Object(T.jsx)(en,{color:"#2DA283",type:"submit",value:"Update"})]}),Object(T.jsx)("h4",{style:{textAlign:"center"},children:"Notificaciones"}),Object(T.jsxs)(Qe,{children:[Object(T.jsx)($e,{color:"#2DA283",children:"ver"}),Object(T.jsx)($e,{color:"#2DA283",children:"a\xf1adir"})]})]}):Object(T.jsx)("div",{})}}]),t}(h.a.Component),rn=[{id:Object(xe.a)(),startMinute:480,length:60,color:"#23ea51",subjectName:"subject X",groupName:"group n",recurrent:!0,recurrencePeriod:1,day:1,startFrom:"2021-W01",room:"Sala 1"},{id:Object(xe.a)(),startMinute:540,length:60,color:"#f7eb80",subjectName:"subject X",groupName:"group n",recurrent:!0,recurrencePeriod:2,day:1,startFrom:"2021-W01",room:"Sala Grande"},{id:Object(xe.a)(),startMinute:780,length:40,color:"#db80f8",subjectName:"subject Testing asdasd asdas dasd ",groupName:"Fantastic 4s",recurrent:!1,executionDate:"2021-04-02",room:"Sala 1"}],on=["Sala 1","Sala Grande","Sal\xf3n de actos"];function an(e){var n=rn.filter((function(n){return n.day===e.day})),t=e.startMinute,r=e.startMinute+e.length,o=n.filter((function(e){return e.startMinute>t&&e.startMinute<r})),a=new Set(o.map((function(e){return e.room})));return on.filter((function(e){return!a.has(e)}))}var sn=function(e){Object(v.a)(t,e);var n=Object(O.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=n.call(this,e)).handleSessionClick=r.handleSessionClick.bind(Object($.a)(r)),r.state={loading:!1,sessions:[],subjects:[]},r.setLoading=r.setLoading.bind(Object($.a)(r)),r.setSessions=r.setSessions.bind(Object($.a)(r)),r.updateSession=r.updateSession.bind(Object($.a)(r)),r.createSession=r.createSession.bind(Object($.a)(r)),r.setSubjects=r.setSubjects.bind(Object($.a)(r)),r}return Object(x.a)(t,[{key:"handleSessionClick",value:function(e){this.setState({selectedSession:e}),console.log(e)}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setSessions",value:function(e){this.setState({sessions:e})}},{key:"updateSession",value:function(e){var n=this;this.context.updateSession(e,(function(){n.setState((function(n){return{sessions:[].concat(Object(Q.a)(n.sessions.filter((function(n){return n.id!==e.id}))),[e])}}))}))}},{key:"createSession",value:function(e){var n=this;this.context.createSession(e,(function(){n.setState((function(n){return{sessions:[].concat(Object(Q.a)(n.sessions),[e])}}))}))}},{key:"setSubjects",value:function(e){this.setState({subjects:e})}},{key:"componentDidMount",value:function(){this.context.setLoadingCallback(this.setLoading),this.context.loadSubjectsOfTeacher("teacher Z",this.setSubjects),this.context.loadSessionsOfTeacher("teacher Z",this.setSessions)}},{key:"render",value:function(){return Object(T.jsx)(ue,{active:this.state.loading,spinner:!0,text:"Loading your content...",children:Object(T.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[Object(T.jsxs)(te,{children:[Object(T.jsxs)(oe,{children:[Object(T.jsx)(ae,{children:Object(T.jsx)("h2",{children:"Asignaturas"})}),Object(T.jsxs)(ie,{children:[(e=this.state.subjects,e.map((function(e){return Object(T.jsx)(Ve,{subject:e})}))),Object(T.jsx)(se,{children:"+"})]})]}),Object(T.jsx)(re,{children:Object(T.jsx)(Ie,{timeStart:480,scheduleSize:720,mins_x_block:15,sessions:this.state.sessions,setSessions:this.setSessions,handleSessionClick:this.handleSessionClick,updateSession:this.updateSession,createSession:this.createSession})}),Object(T.jsxs)(oe,{children:[Object(T.jsx)(ae,{children:Object(T.jsx)("h2",{children:"Sesi\xf3n"})}),Object(T.jsx)(ie,{children:Object(T.jsx)(tn,{getAvalibleRooms:an,id:this.state.selectedSession?this.state.selectedSession.id:null,selectedSession:this.state.selectedSession,updateSession:this.updateSession},this.state.selectedSession?this.state.selectedSession.id:"-")})]})]}),Object(T.jsx)(ce,{})]})});var e}}]),t}(h.a.Component);sn.contextType=f;var cn=function(){return Object(T.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:Object(T.jsx)("h1",{children:"Asignaturas"})})},ln=function(){return Object(T.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:Object(T.jsx)("h1",{children:"Aulas"})})},un=function(){return Object(T.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:Object(T.jsx)("h1",{children:"Usuario"})})},dn=t(41);t(49);var hn=function(){function e(n,t){Object(m.a)(this,e),this.db=n,this.loadingCallback=t}return Object(x.a)(e,[{key:"setLoadingCallback",value:function(e){this.loadingCallback=e}},{key:"getSessionsOfTeacher",value:function(e,n){var t=this;this.loadingCallback(!0),this.db.collection("sessions").where("teacher","==",e).get().then((function(e){t.loadingCallback(!1);var r=[];e.forEach((function(e){var n=e.data();n.id=e.id,r.push(n)})),n(r)}))}},{key:"getSessionsOfSubjectGroup",value:function(e,n){this.db.collection("sessions").where("subjectName","==",e).where("groupName","==",n).get().then((function(e){e.forEach((function(e){console.log("".concat(e.id," => ").concat(JSON.stringify(e.data())))}))}))}},{key:"getSessionsOfRoom",value:function(e){var n=this;this.loadingCallback(!0),this.db.collection("sessions").where("room","==",e).get().then((function(e){n.loadingCallback(!1),console.log(e),e.forEach((function(e){console.log("".concat(e.id," => ").concat(JSON.stringify(e.data())))}))}))}},{key:"updateSession",value:function(e,n){console.log("update"),console.log(e);var t=this.loadingCallback;t(!0),this.db.collection("sessions").doc(e.id).update({day:e.day,endAt:e.endAt,groupName:e.groupName,length:e.length,recurrencePeriod:e.recurrencePeriod,recurrent:e.recurrent,room:e.room,startFrom:e.startFrom,startMinute:e.startMinute,subjectName:e.subjectName,teacher:e.teacher}).then((function(){t(!1),n(e),console.log("session updated")}))}},{key:"createSession",value:function(e,n){console.log("creating"),console.log(e),this.db.collection("sessions").add(e.recurrent?{type:"session",day:e.day,recurrencePeriod:e.recurrencePeriod,startFrom:e.startFrom,endAt:e.endAt,groupName:e.groupName,length:e.length,recurrent:e.recurrent,room:e.room,startMinute:e.startMinute,subjectName:e.subjectName,teacher:e.teacher,color:e.color}:{type:"session",executionDate:e.executionDate,groupName:e.groupName,length:e.length,recurrent:e.recurrent,room:e.room,startMinute:e.startMinute,subjectName:e.subjectName,teacher:e.teacher,color:e.color}).then((function(t){console.log("Document written with ID: ",t.id),n(e),e.id=t.id})).catch((function(e){console.error("Error adding document: ",e)}))}},{key:"getSubjectsOfTeacher",value:function(e,n){var t=this;this.loadingCallback(!0),this.db.collection("subjects").where("teachers","array-contains",e).get().then((function(e){t.loadingCallback(!1);var r=[];e.forEach((function(e){var n=e.data();n.id=e.id,r.push(n)})),n(r)}))}}]),e}();t(49);var bn=function(){function e(){if(Object(m.a)(this,e),null==this.db){console.log("init repo");var n={apiKey:"AIzaSyA5bTwCX8vqJfTYpf-4mg7UCaLdPSxfpdg",authDomain:"tfg-calendar-dev.firebaseapp.com",projectId:"tfg-calendar-dev",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"267333612488",REACT_APP_FIREBASE_STORAGE_BUCKET:"tfg-calendar-dev.appspot.com",REACT_APP_FIREBASE_AUTH_DOMAIN:"tfg-calendar-dev.firebaseapp.com",REACT_APP_BACKEND_BASE_URL:"http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/",REACT_APP_ENV:"pro",REACT_APP_FIREBASE_PROJECT_ID:"tfg-calendar-dev",REACT_APP_FIREBASE_APP_ID:"1:267333612488:web:6ac737c11bf912071146fd",REACT_APP_FIREBASE_API_KEY:"AIzaSyA5bTwCX8vqJfTYpf-4mg7UCaLdPSxfpdg"}).REACT_APP_FIREBASE_STORAGEBUCKET,messagingSenderId:"267333612488",appId:"1:267333612488:web:6ac737c11bf912071146fd"};dn.a.initializeApp(n),this.db=dn.a.firestore()}this.dataSource=new hn(this.db)}return Object(x.a)(e,[{key:"setLoadingCallback",value:function(e){this.dataSource.setLoadingCallback(e)}},{key:"loadSessionsOfTeacher",value:function(e,n){this.dataSource.getSessionsOfTeacher(e,n)}},{key:"updateSession",value:function(e,n){this.dataSource.updateSession(e,n)}},{key:"createSession",value:function(e,n){this.dataSource.createSession(e,n)}},{key:"loadSubjectsOfTeacher",value:function(e,n){this.dataSource.getSubjectsOfTeacher(e,n)}},{key:"updateSubject",value:function(e){}}]),e}(),jn=function(e){Object(v.a)(t,e);var n=Object(O.a)(t);function t(e){var r;return Object(m.a)(this,t),(r=n.call(this,e)).state={},r}return Object(x.a)(t,[{key:"render",value:function(){return Object(T.jsx)(f.Provider,{value:new bn,children:Object(T.jsxs)(k.a,{id:"App",children:[Object(T.jsx)(Z,{hist:this.props.hist}),Object(T.jsxs)(p.c,{id:"page-wrap",children:[Object(T.jsx)(p.a,{path:"/Horario",render:function(){return Object(T.jsx)(sn,{})}}),Object(T.jsx)(p.a,{path:"/Asignaturas",component:cn}),Object(T.jsx)(p.a,{path:"/Aulas",component:ln}),Object(T.jsx)(p.a,{path:"/Usuario",component:un})]})]})})}}]),t}(h.a.Component);var gn=function(){var e=Object(p.f)();return console.log("app"),console.log(f),Object(T.jsx)(jn,{hist:e})},pn=Object(T.jsx)(gn,{name:"Kiwi"});j.a.render(pn,document.getElementById("root")),g()}},[[78,1,2]]]);
//# sourceMappingURL=main.fac41906.chunk.js.map