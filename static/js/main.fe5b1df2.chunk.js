(this["webpackJsonptfg-calendar"]=this["webpackJsonptfg-calendar"]||[]).push([[0],{47:function(e,t,n){},62:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var s,a,o,i,c,r,l,u,d=n(3),h=n.n(d),b=n(35),f=n.n(b),j=(n(62),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,86)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),o(e),i(e)}))}),g=(n(47),n(18)),m=n(9),p=n(10),v=n(4),y=n(15),x=n(14),O=n(6),k=n(56),S=n(26),w=n(7),C=w.a.nav(s||(s=Object(O.a)(["\n  background: #EFEFEF;\n  height: 10vh;\n  display: flex;\n  justify-content: space-between;\n  z-index: 10;\n"]))),T=(Object(w.a)(S.b)(a||(a=Object(O.a)(["\n  color: #fff;\n  background: #F5AB00;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  margin:0 1vw 1vw 0;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #FFFFFF;\n  }\n"]))),Object(w.a)(k.a)(o||(o=Object(O.a)(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 1024px) {\n    display: block;\n    align-items: center;\n    display: flex;\n\n    font-size: 1.8rem;\n    cursor: pointer;\n    justify-self:center;\n  }\n"]))),w.a.select(i||(i=Object(O.a)(["\ndisplay: none;\ncolor: #fff;\n@media screen and (max-width: 1024px) {\n  display: block;\n  align-items: center;\n  display: flex;\n\n  font-size: 1.8rem;\n  cursor: pointer;\n  justify-self:center;\n  background: #2DA283;\n}\n\n"])))),F=w.a.div(c||(c=Object(O.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  @media screen and (max-width: 1024px) {\n    display: none;\n  }\n"]))),N=w.a.nav(r||(r=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  margin: 0 1vw;\n  @media screen and (max-width: 1024px) {\n    display: none;\n  }\n"]))),E=Object(w.a)(S.b)(l||(l=Object(O.a)(["\n  border-radius: 4px;\n  background: #2DA283;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  max-width: 15vw;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #6cd1b6;\n    color: #010606;\n  }\n"]))),A=Object(w.a)(S.b)(u||(u=Object(O.a)(["\n  border-radius: 4px;\n  background: #F5AB00;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #d69b1b;\n    color: #010606;\n  }\n"]))),D=n.p+"static/media/logo.ec64eeb2.png",R="Iniciar sesi\xf3n",G="Correo electr\xf3nico",I="Contrase\xf1a",M="Login",L="Asignaturas",B="Sesiones",V="Aulas",U="Profesores",J="Titulaciones",_="Grupos",z="Aula",P="Profesor",W="Grupo",H="Asignatura",X="Sesi\xf3n",q="D\xeda",K="Hora de inicio",Z="Duraci\xf3n",Q="Color",Y="Nombre",$="Titulaciones relacionadas",ee="Borrar",te="Actualizar",ne="Crear",se="Semestre",ae="Selecciona una titulaci\xf3n",oe="Selecciona un semestre",ie={noCollision:" actualizada con colisiones.",withCollision:" actualizada sin colisiones."},ce="Cargando contenido",re="Crear asignatura",le="Crear grupo",ue="Crear aula",de="Crear profesor",he="Crear titulaci\xf3n",be="Valores de sesi\xf3n por defecto",fe="Concurrente",je="Comprobar concurrencia",ge="Semestres",me="Cerrar sesi\xf3n",pe="Horario",ve=n(0);var ye,xe,Oe,ke,Se,we,Ce,Te,Fe,Ne,Ee=function(e){var t=Object(g.g)();return Object(ve.jsx)(ve.Fragment,{children:Object(ve.jsxs)(C,{children:[Object(ve.jsx)("div",{style:{width:"15vw"},children:Object(ve.jsx)("div",{style:{color:"#fff",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textDecoration:"none",margin:"0 0 0 1vw",height:"100%"},children:Object(ve.jsx)("img",{src:D,alt:"logo",height:"100%"})})}),e.loggedUser?Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsxs)(T,{"data-testid":"routeSelector",name:"selectRouter",id:"selectRouter",onChange:function(e){!function(e,t,n){t.push("/"+e.target.value)}(e,t)},children:[Object(ve.jsx)("option",{value:"Horario",children:pe}),Object(ve.jsx)("option",{value:"Asignaturas",children:L}),Object(ve.jsx)("option",{value:"Aulas",children:V}),Object(ve.jsx)("option",{value:"Profesore",children:U}),Object(ve.jsx)("option",{value:"Titulaciones",children:J})]}),Object(ve.jsxs)(F,{children:[Object(ve.jsx)(N,{children:Object(ve.jsx)(A,{"data-testid":"scheduleNavButton",to:"/Horario",children:pe})}),Object(ve.jsx)(N,{children:Object(ve.jsx)(A,{"data-testid":"subjectsNavButton",to:"/Asignaturas",children:L})}),Object(ve.jsx)(N,{children:Object(ve.jsx)(A,{"data-testid":"classroomsNavButton",to:"/Aulas",children:V})}),Object(ve.jsx)(N,{children:Object(ve.jsx)(A,{"data-testid":"teachersNavButton",to:"/Profesores",children:U})}),Object(ve.jsx)(N,{children:Object(ve.jsx)(A,{"data-testid":"titlesNavButton",to:"/Titulaciones",children:J})})]}),Object(ve.jsx)(N,{style:{width:"15vw"},children:Object(ve.jsx)(E,{"data-testid":"userNavButton",to:"/Usuario",style:{width:"15vw",textAlign:"center"},children:e.loggedUser})})]}):Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},children:Object(ve.jsx)("div",{style:{background:"#F5AB00",padding:"1rem 2rem",borderRadius:"5px",color:"white"},children:"Login"})}),Object(ve.jsx)(N,{children:Object(ve.jsx)("div",{style:{borderRadius:"4px",background:"#2DA283",padding:"10px 22px",color:"#fff",outline:"none",border:"none",transition:"all 0.2s ease-in-out",textDecoration:"none"},children:"Usuario Desconocido"})})]})]})})},Ae=n(11),De=n.n(Ae),Re=n(20),Ge=n(30),Ie=n(54),Me=n.n(Ie),Le=w.a.div(ye||(ye=Object(O.a)(["\ndisplay: flex;\nalign-items: flex-end;\njustify-content: space-around;\n\n\n@media screen and (max-width: 1024px) {\n    flex-direction: column;\n    align-items: center;\n  }\n"]))),Be=w.a.div(xe||(xe=Object(O.a)(["\n  width: 70vw;\n  white-space: nowrap;\n  background:  #FFFFFF;\n\n  @media screen and (max-width: 1024px) {\n    width:100%;\n //   order: -9999;\n  }\n"]))),Ve=w.a.div(Oe||(Oe=Object(O.a)(["\n  display: flex;\n  flex-direction: column; \n  width: 15vw;\n  margin: 0 1vw;\n  white-space: nowrap;\n  align-items: strech;\n  justify-content: stretch; \n\n  @media screen and (max-width: 1024px) {\n    width:100%;\n    height:100%;\n    margin: 1vh 1%;\n  }\n"]))),Ue=w.a.div(ke||(ke=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  background: #EFEFEF;\n  color: #00000;\n\n  margin: 0 0 0.5vh 0;\n  border-radius: 10px 10px 0 0;\n  justify-content: center;\n  padding: 5px 11px;\n"]))),Je=w.a.div(Se||(Se=Object(O.a)(["\n  display: flex;\n  flex-direction: column; \n  align-items: stretch;\n  white-space: nowrap;\n  padding: 2% 1%;\n  height:70vh;\n  justify-content: flex-start;\n  background: #FFFFFF;\n  border-radius: 0 0 10px 10px;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  width:100%;\n  border: 1px solid #EFEFEF;\n\n  @media screen and (max-width: 1024px) {\n    height:100%;\n  }\n"]))),_e=(w.a.div(we||(we=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  padding: 10px 22px;\n  width: 100vw;\n  justify-content: center;\n  background: #EFEFEF;\n  margin: 2px;\n  @media screen and (max-width: 1024px) {\n    background: #FEFEFE;\n  }\n"]))),w.a.button(Ce||(Ce=Object(O.a)(["\n  font-size: 1em;\n  margin: 0.5em;\n  padding: 0.25em 0.5em;\n  border-radius: 3px;\n  outline: none;\n  border: none;\n  background: ",";\n  color: white;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    filter: brightness(125%);\n    color: #010606;\n  }\n"])),(function(e){return e.background?e.background:"#2DA283"}))),ze=w.a.div(Te||(Te=Object(O.a)(["\n  margin-top: 0.5vh;\n  min-height: 7vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  @media screen and (max-width: 1024px) {\n    display: none\n  }\n"]))),Pe=Object(w.a)(Me.a)(Fe||(Fe=Object(O.a)(["\n  height: 100%;\n\n"])));function We(e){var t=e.active,n=e.children;return Object(ve.jsx)(Pe,{active:t,classNamePrefix:"MyLoader_",spinner:!0,text:"Loading your content...",children:n})}var He=w.a.div(Ne||(Ne=Object(O.a)(["\n  height: 5.6vh;\n  margin: 1vh 0 0 0;\n  display: flex;\n  justify-content: center; \n  @media screen and (max-width: 1024px) {\n      \n    }\n"])));function Xe(e){var t=e.children;return Object(ve.jsx)(He,{children:t})}var qe,Ke,Ze,Qe,Ye,$e,et,tt,nt,st,at=n(57),ot=w.a.div(qe||(qe=Object(O.a)(["\n  display: grid;\n  grid-template-columns: 9% 13% 13% 13% 13% 13% 13% 13%;\n  \n  grid-template-rows: repeat(",", 1fr);\n  justify-items: center;\n\n  width: 100%;\n  height:70vh;\n  border: 1px solid #ccc;\n\n  white-space: nowrap;\n  justify-content: stretch; \n  overflow-y: scroll;\n  overflow-x: hidden;\n\n"])),(function(e){return e.divisions})),it=w.a.div(Ke||(Ke=Object(O.a)(["\n  grid-column-start: ",";\n  grid-row-start: ",";\n\n  grid-column-end: ",";\n  grid-row-end: ",";\n  justify-self: stretch;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: #FFF;\n\n  min-height: 3rem;\n\n  border-top: 1px solid #EFEFEF;\n\n\n"])),(function(e){return e.column}),(function(e){return e.row}),(function(e){return e.column+1}),(function(e){return e.row+e.size})),ct=w.a.div(Ze||(Ze=Object(O.a)(["\n  grid-column-start: ",";\n  grid-row-start: ",";\n\n  grid-column-end: ",";\n  grid-row-end: ",";\n  background-color: ",";\n  justify-self: stretch;\n  height: auto;\n  width: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  outline: none;\n  border: none;\n  \n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  color: white; \n"])),(function(e){return e.column}),(function(e){return e.row}),(function(e){return e.column+1}),(function(e){return e.row+(e.size||1)}),(function(e){return e.color||"#FFFFFF"})),rt=w.a.button(Qe||(Qe=Object(O.a)(["\nbackground-color: ",";\njustify-self: stretch;\nheight: 100%;\nwidth: 100%;\n\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n\noutline: none;\nborder: none;\n\noverflow: hidden;\ntext-overflow: ellipsis;\n\ncolor: white; \n&:hover {\n  transition: all 0.2s ease-in-out;\n  filter: brightness(85%);\n  color: #010606;\n}\n&:active {\n  background: #FFFFFF;\n}\n"])),(function(e){return e.color||"#FFFFFF"})),lt=(w.a.button(Ye||(Ye=Object(O.a)(["\n  grid-column-start: ",";\n  grid-row-start: ",";\n\n  grid-column-end: ",";\n  grid-row-end: ",";\n  background-color: ",";\n  justify-self: stretch;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  outline: none;\n  border: none;\n  \n  overflow: hidden;\n  text-overflow: ellipsis;\n\n  color: white; \n  &:hover {\n    transition: all 0.2s ease-in-out;\n    filter: brightness(85%);\n    color: #010606;\n  }\n  &:active {\n    background: #FFFFFF;\n  }\n\n"])),(function(e){return e.column}),(function(e){return e.row}),(function(e){return e.column+1}),(function(e){return e.row+(e.size||1)}),(function(e){return e.color||"#FFFFFF"})),w.a.div.attrs((function(e){return{style:{background:e.background,gridColumnStart:e.column,gridRowStart:e.row,gridColumnEnd:e.column+1,gridRowEnd:e.row+1,borderTop:e.row>1&&e.column>0?"1px solid #EFEFEF":""}}}))($e||($e=Object(O.a)(["justify-self: stretch;\nmin-height: 1rem;\n",";\n"])),(function(e){return e.column>1?"&:hover {transition: all 0.2s ease-in-out;background: #EFEFEF;color: #010606;}":""}))),ut=w.a.div(et||(et=Object(O.a)(["\n  grid-column-start: ",";\n  grid-row-start: ",";\n\n  grid-column-end: ",";\n  grid-row-end: ",";\n  background-color: ",";\n  justify-self: stretch;\n  height: auto;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center; \n\n  position: -webkit-sticky; /* Safari */\n  position: sticky;\n  top: 0;\n  border-bottom: 1px solid #EFEFEF;\n\n\n  \n  margin-top:","%;\n  margin-bottom:","%;\n"])),(function(e){return e.column}),(function(e){return e.row}),(function(e){return e.column+1}),(function(e){return e.row+(e.size||1)}),(function(e){return e.color||"#FFFFFF"}),(function(e){return e.marginTop}),(function(e){return e.marginBot})),dt=(w.a.div(tt||(tt=Object(O.a)(["\n  display: flex;\n  flex-direction: row; \n  justify-content: center;\n  align-items: center;\n  \n  width: 100%;\n  height: 5vh;\n"]))),w.a.div(nt||(nt=Object(O.a)(["\n  margin-right: 5vw;\n  margin-left: auto;\n"]))),w.a.div(st||(st=Object(O.a)(["\n    \n  display: flex;\n  flex-direction: row; \n  justify-content: center;\n  align-items: center;\n  justify-self: center;\n  margin-right: 3%;\n"]))),h.a.createContext()),ht=n(85);function bt(e){return Object(ve.jsxs)("p",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:[e.subjectName,Object(ve.jsx)("br",{}),e.groupName,Object(ve.jsx)("br",{}),e.length+" mins"]})}function ft(e,t,n){var s=e[0],a=s.startTime.split(":"),o=60*parseInt(a[0])+parseInt(a[1]),i=1+((o-t.timeStart)/t.mins_x_block>>0),c=s.day+1,r=Math.ceil((o+s.length-t.timeStart)/t.mins_x_block)+1-i;return Object(ve.jsx)(ct,{row:i+1,column:c,size:r,children:e.map((function(e){return Object(ve.jsx)(rt,{"data-testid":e.id,onClick:function(){n(e)},color:e.color,draggable:"true",onDragStart:function(t){return function(e,t){e.dataTransfer.setData("text",JSON.stringify(t))}(t,e)},style:{margin:"0",padding:"0"},children:bt(e)})}))},Object(ht.a)())}function jt(e,t,n){var s=[],a={};t.forEach((function(e){var t=function(e){var t=e.startTime.split(":"),n=60*parseInt(t[0])+parseInt(t[1]),s=1+((n-480)/15>>0),a=Math.ceil((n+parseInt(e.length)-480)/15)+1;return Array.from(new Array(a-s),(function(e,t){return t+s}))}(e),n=e.day+"-"+t[0]+"-"+t[t.length-1];n in a||(a[n]=[]),a[n].push(e)}));for(var o=0,i=Object.entries(a);o<i.length;o++){var c=Object(at.a)(i[o],2),r=(c[0],c[1]);s.push(ft(r,e,n))}return s}function gt(e){var t=e.timeStart/60>>0,n=Math.ceil(60/e.mins_x_block);return Array.from(Array(e.divisions/n).keys()).map((function(e){return Object(ve.jsx)(it,{size:n,row:e*n+2,column:1,children:t+e+":00"})}))}var mt={1:"Lunes",2:"Martes",3:"Mi\xe9rcoles",4:"Jueves",5:"Viernes",6:"S\xe1bado",7:"Domingo"};function pt(e,t){var n=8*(e.divisions+1);return Array.from(Array(n).keys()).map((function(n){return Object(ve.jsx)(lt,{"data-testid":(1+(n/8>>0)).toString()+"-"+(n%8+1).toString(),row:1+(n/8>>0),column:n%8+1,onDrop:function(s){return t(s,n,e)},onDragOver:function(e){e.preventDefault()}})}))}var vt,yt,xt,Ot,kt,St=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).state={mins_x_block:e.mins_x_block,divisions:e.scheduleSize/e.mins_x_block,timeStart:e.timeStart},s.drop=s.drop.bind(Object(v.a)(s)),s.getScheduleInformation=s.getScheduleInformation.bind(Object(v.a)(s)),s.handleSessionClick=s.handleSessionClick.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"handleSessionClick",value:function(e){this.props.handleSessionClick(e)}},{key:"getScheduleInformation",value:function(e,t){var n=t%8,s=((t/8>>0)-1)*this.state.mins_x_block+this.state.timeStart,a=s+e.length;return{schedulable:0===this.props.sessions.filter((function(t){return n===t.day&&(s=e,!(t.id===s.id));var s})).filter((function(e){return e.startMinute>s&&e.startMinute<a})).length,startMinute:s}}},{key:"drop",value:function(e,t,n){e.preventDefault(),console.log("data");var s=JSON.parse(e.dataTransfer.getData("text"));console.log(s),"group"===s.type&&((s=function(e){var t=e.defaultSessionValues;return t.groupName=e.groupName,t.subjectName=e.subjectName,t.type="group",t}(s)).type="group");var a=function(e){return{type:"session",id:e.id,origin:"drag&drop - session",length:e.length,color:e.color,subjectName:e.subjectName,groupName:e.groupName,room:e.room,teacher:e.teacher}}(s),o=((t/8>>0)-1)*n.mins_x_block+n.timeStart,i=Math.floor(o/60),c=o%60,r=(i=i>9?i:"0"+i)+":"+(c=c>9?c:"0"+c);a.startTime=r,a.day=t%8,!0===this.getScheduleInformation(a,t).schedulable&&("session"===s.type?this.props.updateSession(a):"group"===s.type&&this.props.createSession(a))}},{key:"render",value:function(){return Object(ve.jsx)("div",{children:Object(ve.jsxs)(ot,{divisions:this.state.divisions,children:[pt(this.state,this.drop),Array.from(Array(7).keys()).map((function(e){return Object(ve.jsx)(ut,{row:1,column:e+2,children:mt[e+1]})})),gt(this.state),jt(this.state,this.props.sessions,this.handleSessionClick)]})})}}]),n}(h.a.Component);St.contextType=dt;var wt=w.a.div(vt||(vt=Object(O.a)(["\n  display: flex;\n  flex-direction: column; \n  width: 100%;\n\n  margin: 0.5rem 0 0 0;\n"]))),Ct=w.a.button(yt||(yt=Object(O.a)(["\n\n    background: ",";\n    justify-content: center;\n    \n    border-radius: ","; \n    padding: 0.4em;\n    outline: none;\n    border: none;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    color: white;\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        background: #6cd1b6;\n        color: #010606;\n    }\n"])),(function(e){return e.color}),(function(e){return e.ButtonCornersRadius?"4px 4px 4px 4px":"4px 4px 0 0"})),Tt=w.a.div(xt||(xt=Object(O.a)(["\n    display: ",";\n    flex-direction: column; \n    width: 100%;\n    background: #EFEFEF;\n    border-radius: 0 0 4px 4px;\n"])),(function(e){return e.show?"flex":"none"})),Ft=w.a.button(Ot||(Ot=Object(O.a)(["\n\n    background: ",";\n    justify-content: center;\n    padding: 0.1em;\n    outline: none;\n    border: none;\n    margin: 0.5vh;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    color: white;\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        filter: brightness(85%);\n    }\n"])),(function(e){return e.group.color}));w.a.button(kt||(kt=Object(O.a)(["\n\n    background: #FFFFFF;\n    justify-content: flex-end;\n    padding: 0.4rem;\n    outline: none;\n    border: none;\n    margin: 2%;\n    border-radius: 0 0 4px 4px;\n\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        filter: brightness(85%);\n    }\n"])));function Nt(e){return e.map((function(e){return Object(ve.jsx)(Ft,{"data-testid":"subjectGroup-"+e.groupName,group:e,draggable:"true",onDragStart:function(t){return function(e,t){e.dataTransfer.setData("text",JSON.stringify(t))}(t,e)},id:e.id,children:e.groupName})}))}var Et,At,Dt,Rt,Gt=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).state={subject:e.subject,showGroups:!1},s.handleSubjectTitleClick=s.handleSubjectTitleClick.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"handleSubjectTitleClick",value:function(){this.setState({showGroups:!this.state.showGroups})}},{key:"render",value:function(){return Object(ve.jsxs)(wt,{children:[Object(ve.jsx)(Ct,{"data-testid":"subject-"+this.state.subject.subjectName,onClick:this.handleSubjectTitleClick,ButtonCornersRadius:!this.state.showGroups,color:this.state.subject.color,children:this.state.subject.subjectName}),Object(ve.jsx)(Tt,{show:this.state.showGroups,children:Nt(this.state.subject.groups)})]})}}]),n}(h.a.Component),It=n(27),Mt=w.a.form(Et||(Et=Object(O.a)(["\n  display: flex;\n  flex-direction: column; \n  justify-content: space-around;\n\n  margin: 0 0.5em 2vh 0.5em;\n  "]))),Lt=w.a.input(At||(At=Object(O.a)(["\n  width:100%;\n  margin-bottom: 0.5em;\n"]))),Bt=(w.a.div(Dt||(Dt=Object(O.a)(["\n\n  display: flex;\n  flex-direction: row;\n  margin: 5%;\n  justify-content: space-around; \n  align-items: center;\n\n"]))),w.a.input(Rt||(Rt=Object(O.a)(["\nborder-radius: 4px;\nbackground: ",";\npadding: 0.5rem 2rem;\nmargin:0;\ncolor: #FFFF;\noutline: none;\nborder: none;\ncursor: pointer;\ntransition: all 0.2s ease-in-out;\ntext-decoration: none;\n&:hover {\n  transition: all 0.2s ease-in-out;\n  background: #6cd1b6;\n  color: #010606;\n}\n\n"])),(function(e){return e.color})));function Vt(e,t,n,s){var a=e.map((function(e){return Object(ve.jsx)("option",{value:JSON.stringify(e),selected:e.name===n.name,children:e.name},e.name)}));return Object(ve.jsx)("select",{"data-testid":s+"Selector",name:s+"selector",id:s,defaultValue:n,onChange:function(e){t(e,s)},style:{marginBottom:"0.5em"},children:a})}var Ut=["","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"];function Jt(e,t){var n=Array.from(new Array(7),(function(e,t){return t+1})).map((function(e){return Object(ve.jsx)("option",{value:parseInt(e),children:Ut[e]})}));return Object(ve.jsx)("select",{"data-testid":"sessionDayInput",name:"days",id:"days",defaultValue:parseInt(e),onChange:function(e){t(e,"day")},style:{marginBottom:"0.5em"},children:n})}var _t=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).state={},s.onChangeField=s.onChangeField.bind(Object(v.a)(s)),s.onChangeCheckbox=s.onChangeCheckbox.bind(Object(v.a)(s)),s.props.selectedSession&&(s.state={id:s.props.selectedSession.id,subjectName:s.props.selectedSession.subjectName,groupName:s.props.selectedSession.groupName,startTime:s.props.selectedSession.startTime,length:s.props.selectedSession.length,day:s.props.selectedSession.day,room:s.props.selectedSession.room,teacher:s.props.selectedSession.teacher,color:s.props.selectedSession.color}),s.handleSubmit=s.handleSubmit.bind(Object(v.a)(s)),s.updateStateFromSession=s.updateStateFromSession.bind(Object(v.a)(s)),s.onUnavailability=s.onUnavailability.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"onUnavailability",value:function(){}},{key:"updateStateFromSession",value:function(e){this.setState({id:e.id,subjectName:e.subjectName,groupName:e.groupName,startTime:e.startTime,length:e.length,day:e.day,room:e.room,teacher:e.teacher,color:e.color}),this.state.id&&this.props.checkAvailability(this.state)}},{key:"componentDidUpdate",value:function(e){e.selectedSession!==this.props.selectedSession&&(this.updateStateFromSession(this.props.selectedSession),this.props.selectedSession.id&&this.props.checkAvailability(this.state)),e.rooms!==this.props.rooms&&(this.props.rooms.map((function(e){return e.name})).includes(this.state.room.name)||this.setState({room:{name:"Sin Asignar",checkConcurrency:!1}})),e.teachers!==this.props.teachers&&(this.props.teachers.map((function(e){return e.name})).includes(this.state.teacher.name)||this.setState({teacher:{name:"Sin Asignar",checkConcurrency:!1}}))}},{key:"componentDidMount",value:function(){this.state.id&&this.props.checkAvailability(this.state)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={id:this.state.id,subjectName:this.state.subjectName,groupName:this.state.groupName,length:this.state.length,room:this.state.room,teacher:this.state.teacher,color:this.state.color,day:this.state.day,startTime:this.state.startTime};this.props.updateSession(t),this.setState({id:null})}},{key:"onChangeField",value:function(e,t){var n=this;"day"===t?this.setState({day:parseInt(e.target.value)},(function(){n.props.checkAvailability(n.state)})):["room","teacher"].includes(t)?this.setState(Object(It.a)({},t,JSON.parse(e.target.value))):this.setState(Object(It.a)({},t,""===e.target.value?0:e.target.value),(function(){["length","startTime"].includes(t)&&n.props.checkAvailability(n.state)}))}},{key:"onChangeCheckbox",value:function(e){this.setState((function(t){return Object(It.a)({},e,!t[e])}))}},{key:"render",value:function(){var e=this;return this.state.id?Object(ve.jsx)("div",{children:Object(ve.jsxs)(Mt,{onSubmit:this.handleSubmit,children:[Object(ve.jsx)("label",{children:H}),Object(ve.jsx)(Lt,{"data-testid":"sessionSubjectInput",disabled:!0,type:"text",name:"subject",value:this.state.subjectName,onChange:function(t){e.onChangeField(t,"subjectName")}}),Object(ve.jsx)("label",{children:W}),Object(ve.jsx)(Lt,{"data-testid":"sessionGroupInput",disabled:!0,type:"text",name:"group",value:this.state.groupName,onChange:function(t){e.onChangeField(t,"groupName")}}),Object(ve.jsx)("label",{children:Q}),Object(ve.jsx)(Lt,{"data-testid":"colorInput",type:"color",name:"color",value:this.state.color,onChange:function(t){e.onChangeField(t,"color")}}),Object(ve.jsx)("label",{children:q}),Jt(this.state.day,this.onChangeField),Object(ve.jsx)("label",{children:K}),Object(ve.jsx)(Lt,{"data-testid":"startTimeInput",type:"time",name:"start",min:"08:00",max:"21:00",value:this.state.startTime,onChange:function(t){e.onChangeField(t,"startTime")}}),Object(ve.jsx)("label",{children:Z}),Object(ve.jsx)(Lt,{"data-testid":"lengthInput",type:"number",name:"length",value:this.state.length,onChange:function(t){e.onChangeField(t,"length")}}),Object(ve.jsx)("label",{children:z}),Vt(this.props.rooms,this.onChangeField,this.state.room,"room"),Object(ve.jsx)("label",{children:P}),Vt(this.props.teachers,this.onChangeField,this.state.teacher,"teacher"),Object(ve.jsx)("br",{}),Object(ve.jsx)(Bt,{"data-testid":"submitButton",color:"#2DA283",type:"submit",value:te})]})}):null}}]),n}(h.a.Component);function zt(e,t){return e.map((function(e){return e.name})).indexOf(t.name)<0?[].concat(Object(Ge.a)(e),[t]):e}function Pt(e){switch(e){case"error":return"#bf1e1e";case"warning":return"#ccb406";default:return"#2ca062"}}var Wt,Ht,Xt=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).handleSessionClick=s.handleSessionClick.bind(Object(v.a)(s)),s.state={loading:!1,sessions:[],subjects:[],titles:[],rooms:[],teachers:[],selectedSession:{},footerMsg:{type:"success",msgs:[e.msg?e.msg:""],header:""},selectedTitle:null,selectedSemester:0},s.setFooterMsg=s.setFooterMsg.bind(Object(v.a)(s)),s.setLoading=s.setLoading.bind(Object(v.a)(s)),s.setSessions=s.setSessions.bind(Object(v.a)(s)),s.updateSession=s.updateSession.bind(Object(v.a)(s)),s.createSession=s.createSession.bind(Object(v.a)(s)),s.updateDroppedSession=s.updateDroppedSession.bind(Object(v.a)(s)),s.setSubjects=s.setSubjects.bind(Object(v.a)(s)),s.setTitles=s.setTitles.bind(Object(v.a)(s)),s.selectTitle=s.selectTitle.bind(Object(v.a)(s)),s.selectSemester=s.selectSemester.bind(Object(v.a)(s)),s.setRooms=s.setRooms.bind(Object(v.a)(s)),s.setTeachers=s.setTeachers.bind(Object(v.a)(s)),s.getTimeBlocksOfSession=s.getTimeBlocksOfSession.bind(Object(v.a)(s)),s.compareAvailabilityFactors=s.compareAvailabilityFactors.bind(Object(v.a)(s)),s.showError=s.showError.bind(Object(v.a)(s)),s.checkAvailability=s.checkAvailability.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"showError",value:function(e){this.setLoading(!1),this.setFooterMsg({header:"Ha ocurrido un error",msgs:[e],type:"error"})}},{key:"compareAvailabilityFactors",value:function(e,t){var n=this.getTimeBlocksOfSession(e),s=this.getTimeBlocksOfSession(t);return e.day===t.day&&n.some((function(e){return s.indexOf(e)>=0}))}},{key:"handleSessionClick",value:function(e){this.setState({selectedSession:e,rooms:[e.room],teachers:[e.teacher]})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setSessions",value:function(e){this.setState({sessions:e,selectedSession:null})}},{key:"updateDroppedSession",value:function(){var e=Object(Re.a)(De.a.mark((function e(t){var n=this;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.context.checkDisponibilityForSession(t,this.state.selectedSemester,(function(e){var s={name:"Sin Asignar",checkConcurrency:!1},a={header:"Sesi\xf3n de "+t.subjectName+" - "+t.groupName,msgs:[],type:"success"};e.teacher&&e.room?a.header=a.header+ie.withCollision:(a.header=a.header+ie.noCollision,a.type="warning",e.room||(a.msgs.push(z+": "+t.room.name+" -> "+s.name+"."),t.room=s),e.teacher||(a.msgs.push(P+": "+t.teacher.name+" -> "+s.name+"."),t.teacher=s)),n.updateSession(t,n.setFooterMsg(a))}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSession",value:function(e,t){var n=this;this.context.updateSession(e,(function(){t&&t(),n.context.loadSessionsOfSubjects(n.state.subjects.map((function(e){return e.subjectName})),n.setSessions)}),this.state.selectedSemester)}},{key:"createSession",value:function(e){var t=this;this.context.createSession(e,(function(){if(t.state.subjects.length>0){var e=t.state.subjects.map((function(e){return e.subjectName}));t.context.loadSessionsOfSubjects(e,t.setSessions)}}))}},{key:"setSubjects",value:function(e){this.setState({subjects:e});var t=e.map((function(e){return e.subjectName}));e.length>0&&this.context.loadSessionsOfSubjects(t,this.setSessions)}},{key:"setTitles",value:function(e){this.setState({titles:e})}},{key:"selectTitle",value:function(e){try{var t=JSON.parse(e);this.setState({selectedTitle:t,subjects:[],sessions:[],selectedSession:{}});var n={titleName:t.titleName,semester:parseInt(this.state.selectedSemester)};this.context.loadSubjectsOfTitle(n,this.setSubjects)}catch(s){this.setState({selectedTitle:null,selectedSemester:0,subjects:[],sessions:[],selectedSession:{}})}}},{key:"selectSemester",value:function(e){this.setState({selectedSemester:e,subjects:[],sessions:[],selectedSession:{}});var t={titleName:this.state.selectedTitle.titleName,semester:parseInt(e)};this.context.loadSubjectsOfTitle(t,this.setSubjects)}},{key:"setFooterMsg",value:function(e){this.setState({footerMsg:e})}},{key:"setRooms",value:function(e){this.setState({rooms:e})}},{key:"setTeachers",value:function(e){this.setState({teachers:e})}},{key:"getTimeBlocksOfSession",value:function(e){var t=e.startTime.split(":"),n=60*parseInt(t[0])+parseInt(t[1]),s=1+((n-480)/15>>0),a=Math.ceil((n+parseInt(e.length)-480)/15)+1;return Array.from(new Array(a-s),(function(e,t){return t+s}))}},{key:"componentDidMount",value:function(){this.context.setLoadingCallback(this.setLoading),this.context.setErrorCallback(this.showError),this.context.loadTitles(this.setTitles)}},{key:"checkAvailability",value:function(e){var t=this;this.context.getAvailableRooms(this.state.selectedSemester,e.day,this.getTimeBlocksOfSession(e),(function(n){t.compareAvailabilityFactors(t.state.selectedSession,e)&&(n=zt(n,e.room)),t.setRooms(n)})),this.context.getAvailableTeachers(this.state.selectedSemester,e.day,this.getTimeBlocksOfSession(e),(function(n){t.compareAvailabilityFactors(t.state.selectedSession,e)&&(n=zt(n,e.teacher)),t.setTeachers(n)}))}},{key:"render",value:function(){return Object(ve.jsx)(We,{active:this.state.loading,spinner:!0,text:ce,children:Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[Object(ve.jsxs)(Xe,{children:[(a=this.state.titles,o=this.selectTitle,Object(ve.jsx)(h.a.Fragment,{children:Object(ve.jsxs)("select",{"data-testid":"titleSelector",name:"titles",id:"titles",onChange:function(e){o(e.target.value)},children:[Object(ve.jsx)("option",{value:null,children:ae}),a.map((function(e){return Object(ve.jsx)("option",{"data-testid":"titleOption",value:JSON.stringify(e),children:e.titleName})}))]})})),this.state.selectedTitle?(t=this.state.selectedTitle.semesters,n=this.selectSemester,s=this.state.selectedSemester,Object(ve.jsx)(h.a.Fragment,{children:Object(ve.jsxs)("select",{"data-testid":"semesterSelector",name:"semesters",id:"semesters",defaultValue:parseInt(s),onChange:function(e){n(e.target.value)},children:[Object(ve.jsx)("option",{value:0,children:oe}),Array.from(new Array(t),(function(e,t){return t+1})).map((function(e){return Object(ve.jsx)("option",{value:parseInt(e),children:e})}))]})})):""]}),Object(ve.jsxs)(Le,{children:[Object(ve.jsxs)(Ve,{children:[Object(ve.jsx)(Ue,{children:Object(ve.jsx)("h2",{children:L})}),Object(ve.jsx)(Je,{children:(e=this.state.subjects,e.map((function(e){return Object(ve.jsx)(Gt,{subject:e})})))})]}),Object(ve.jsx)(Be,{children:Object(ve.jsx)(St,{timeStart:480,scheduleSize:780,mins_x_block:15,sessions:this.state.sessions,handleSessionClick:this.handleSessionClick,updateSession:this.updateDroppedSession,createSession:this.createSession})}),Object(ve.jsxs)(Ve,{children:[Object(ve.jsx)(Ue,{children:Object(ve.jsx)("h2",{children:"Sesi\xf3n"})}),Object(ve.jsx)(Je,{children:Object(ve.jsx)(_t,{id:this.state.selectedSession?this.state.selectedSession.id:null,selectedSession:this.state.selectedSession,updateSession:this.updateSession,rooms:this.state.rooms,teachers:this.state.teachers,checkAvailability:this.checkAvailability},this.state.selectedSession?this.state.selectedSession.id:null)})]})]}),Object(ve.jsxs)(ze,{style:{color:Pt(this.state.footerMsg.type)},children:[Object(ve.jsx)("b",{children:this.state.footerMsg.header}),this.state.footerMsg.msgs.map((function(e){return Object(ve.jsx)("p",{children:e})}))]})]})});var e,t,n,s,a,o}}]),n}(h.a.Component);Xt.contextType=dt;var qt,Kt,Zt,Qt,Yt,$t,en,tn,nn,sn,an,on=w.a.div(Wt||(Wt=Object(O.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width:100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  display: block;\n"]))),cn=w.a.div(Ht||(Ht=Object(O.a)(["\n  position:fixed;\n  background: white;\n  width: ",";\n  height: auto;\n  top:50%;\n  left:50%;\n  transform: translate(-50%,-50%);\n  padding: 0 1%;\n"])),(function(e){return e.width?e.width:"40%"})),rn=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return this.props.show?Object(ve.jsx)(on,{children:Object(ve.jsxs)(cn,{width:this.props.width,children:[Object(ve.jsx)("div",{children:Object(ve.jsx)(_e,{onClick:this.props.onClose,children:Object(ve.jsx)("b",{children:"X"})})}),Object(ve.jsx)("div",{children:this.props.children})]})}):null}}]),n}(h.a.Component),ln=w.a.div(qt||(qt=Object(O.a)(["\n\n    display: flex;\n    flex-direction: row;\n    align-items: bottom; \n    \n\n    white-space: nowrap;\n    justify-content: ","; \n\n"])),(function(e){return e.justify?e.justify:"stretch"})),un=w.a.div(Kt||(Kt=Object(O.a)(["\n\n    width:",";\n    margin: ",";\n\n    @media screen and (max-width: 1024px) {\n        height: 100%;\n        width:100%;\n        margin: 1%;\n    }\n"])),(function(e){return e.width}),(function(e){return e.margin?e.margin:"0"})),dn=w.a.form(Zt||(Zt=Object(O.a)(["\n\n    display:flex;\n    flex-direction:column;\n\n    align-items: bottom;\n\n    flex-wrap: ",";\n\n    height:",";\n    width:",";\n    max-width: ",";\n    overflow: ",";\n    overflow-x: ",";\n    overflow-y: ",";\n\n    margin: ",";\n    border: ",";\n    border-radius: 0 0 10px 10px;\n\n\n"])),(function(e){return e.wrap?e.wrap:"nowrap"}),(function(e){return e.height?e.height:"auto"}),(function(e){return e.width?e.width:"auto"}),(function(e){return e.width?e.width:"auto"}),(function(e){return e.overflow?e.overflow:"none"}),(function(e){return e.overflowx?e.overflowx:"hidden"}),(function(e){return e.overflowy?e.overflowy:"hidden"}),(function(e){return e.margin?e.margin:"0.5vh 0 1vh 0"}),(function(e){return e.border?e.border:""})),hn=w.a.div(Qt||(Qt=Object(O.a)(["\n    height: 6.5vh;\n"]))),bn=w.a.div(Yt||(Yt=Object(O.a)(["\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    background: #EFEFEF;\n    color: #00000;\n\n    border-radius: 10px 10px 0 0;\n    justify-content: center;\n    padding: 5px 11px;\n"]))),fn=w.a.div($t||($t=Object(O.a)(["\n    display: flex;\n    flex-direction: column;\n    margin: ",";\n"])),(function(e){return e.margin?e.margin:"0.5vh"})),jn=w.a.input(en||(en=Object(O.a)(['\n  border-radius: "4px";\n  margin: ',";\n  margin-bottom: 0.5em;\n"])),(function(e){return e.margin?e.margin:"0.5vh"})),gn=w.a.label(tn||(tn=Object(O.a)(["\n  margin: ",";\n"])),(function(e){return e.margin?e.margin:"0.5vh"})),mn=(w.a.div(nn||(nn=Object(O.a)(["\n    display:flex;\n    flex-direction:row;\n    margin: 0.5vh 0 1vh 0;\n\n    border: 1px solid #EFEFEF;\n\n    border-radius: 0 0 10px 10px;\n    height:",";\n    width:",";\n"])),(function(e){return e.height?e.height:"auto"}),(function(e){return e.width?e.width:"auto"})),w.a.button(sn||(sn=Object(O.a)(["\n    display:block;\n    text-align:center;\n    height:",";\n    width:",";\n    border-radius: 4px;\n    background: ",";\n    padding: ",";\n    margin: ",";\n\n\n    color: #FFFF;\n    outline: none;\n    border: none;\n    cursor: pointer;\n    transition: all 0.2s ease-in-out;\n    text-decoration: none;\n    &:hover {\n    transition: all 0.2s ease-in-out;\n    filter: brightness(125%);\n    }\n"])),(function(e){return e.height?e.height:"auto"}),(function(e){return e.width?e.width:"auto"}),(function(e){return e.color||"#EFEFEF"}),(function(e){return e.padding||"0"}),(function(e){return e.margin||"0"})));w.a.input(an||(an=Object(O.a)(["\n    display:block;\n    text-align:center;\n    height:",";\n    width:",";\n    border-radius: 4px;\n    background: ",";\n    margin: 5%;\n    color: #FFFF;\n    outline: none;\n    border: none;\n    cursor: pointer;\n    transition: all 0.2s ease-in-out;\n    text-decoration: none;\n    &:hover {\n    transition: all 0.2s ease-in-out;\n    filter: brightness(125%);\n    }\n"])),(function(e){return e.height?e.height:"auto"}),(function(e){return e.width?e.width:"auto"}),(function(e){return e.color||"#EFEFEF"}));function pn(e,t){return e.groups.map((function(e){return Object(ve.jsx)(mn,{type:"button",color:e.color,padding:"1vh",margin:"1%",onClick:function(){t(e)},children:e.groupName})}))}function vn(e){return Object(ve.jsxs)("p",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:[e.groupName," | ",e.length+" mins"," | ",e.room.name]})}function yn(e,t,n){return Array.from(e).map((function(e){return Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"},children:[Object(ve.jsx)(mn,{"data-testid":"session-"+e.id,color:e.color,style:{width:"100%"},padding:"0.5vh",margin:"1%",onClick:function(n){n.preventDefault(),t(e)},children:vn(e)}),Object(ve.jsx)(mn,{"data-testid":"deleteSession-"+e.id,color:"#c94242",padding:"0.5vh",margin:"1%",onClick:function(t){t.preventDefault(),n(e)},children:ee})]})}))}function xn(e,t,n,s,a,o,i,c,r,l){return Object(ve.jsxs)(un,{width:"40vw",margin:"0 0 0 1.5vw",children:[Object(ve.jsx)(bn,{children:Object(ve.jsx)("h2",{children:W})}),Object(ve.jsxs)(dn,{height:"36vh",overflowy:"auto",style:{border:"1px solid #EFEFEF","border-radius":"0 0 10px 10px"},children:[Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Y}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw","data-testid":"groupSubjectInput",disabled:!0,type:"text",name:"subject",value:e.groupName,onChange:function(e){n(e,"subjectName","selectedGroup")}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Q}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw","data-testid":"groupColorInput",type:"color",name:"color",value:e.color,onChange:function(e){n(e,"color","selectedGroup")}})]}),Object(ve.jsxs)(gn,{margin:"0 0.5vw 0 0.5vw",children:[" ",Object(ve.jsx)("b",{children:be})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Q}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw","data-testid":"defaultGroupColorInput",type:"color",name:"color",value:e.defaultSessionValues.color,onChange:function(e){n(e,"color","selectedGroup","defaultSessionValues")}})]}),Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",margin:"0 0 1vh 0"},children:[Object(ve.jsx)(mn,{color:"#db3f3f",margin:"0 1vw",padding:"0.5rem 1rem",width:"fit-content",onClick:function(t){t.preventDefault(),c(r,e)},"data-testid":"groupDelete",children:ee}),Object(ve.jsx)(mn,{color:"#2DA283",margin:"0 1vw",padding:"0.5rem 1rem",width:"fit-content","data-testid":"groupUpdate",children:te})]})]}),Object(ve.jsx)(bn,{children:Object(ve.jsx)("h2",{children:B})}),Object(ve.jsxs)(dn,{height:"27.5vh",overflowy:"auto",margin:"0.5vh 0 0 0",style:{border:"1px solid #EFEFEF","border-radius":"0 0 10px 10px"},children:[yn(t,s,i),Object(ve.jsx)(mn,{color:"#2DA283",padding:"1vh",margin:"2%",onClick:function(e){e.preventDefault(),o("session"),l()},children:"+"})]})]})}function On(e,t,n,s){var a=t.map((function(e){return e.titleName}));return Object(ve.jsxs)(dn,{overflowy:"auto",children:[Object(ve.jsx)("h2",{children:"Selected Titles"}),e.map((function(e){return function(e,t,n,s){var a={titleName:e.titleName,semester:parseInt(e.semester)};return Object(ve.jsxs)(fn,{"data-testid":"titleModalContent",style:{flexDirection:"row"},children:[Object(ve.jsx)(jn,{"data-testid":"checkbox-"+e.titleName,margin:"0.5vh 0.5vw 0 0",type:"checkbox",checked:t,value:t,onChange:function(e){n(a,!0)}}),Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",style:{maxWidth:"90%"},children:Object(ve.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:e.titleName})}),t?Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsxs)("p",{children:[" - ",se,": "]}),Object(ve.jsx)("select",{"data-testid":"semesterSelector-"+e.titleName,name:"semesters",defaultValue:s,onChange:function(t){n({titleName:e.titleName,semester:parseInt(t.target.value)},!1)},children:Array.from(new Array(e.semesters),(function(e,t){return t+1})).map((function(e){return parseInt(e)%2===parseInt(s)%2?Object(ve.jsx)("option",{value:parseInt(e),children:e}):""}))})]}):""]})}(e,a.includes(e.titleName),n,a.includes(e.titleName)?t[a.indexOf(e.titleName)].semester:0)}))]})}var kn=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).state={showTitles:!!e.showTitles&&e.showTitles},s.showTitles=s.showTitles.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"showTitles",value:function(e){this.setState((function(t){return{showTitles:!t.showTitles,modalContent:e}}))}},{key:"render",value:function(){return Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsxs)(ln,{children:[this.props.selectedSubject?(e=this.props.selectedSubject,t=this.props.onChangeField,n=this.props.onSelectGroup,s=this.props.updateSubject,a=this.props.showModal,o=this.showTitles,i=this.props.deleteSubject,Object(ve.jsxs)(un,{width:"25vw",height:"74vh",children:[Object(ve.jsx)(bn,{children:Object(ve.jsx)("h2",{children:H})}),Object(ve.jsxs)(dn,{height:"36vh",overflowy:"auto",style:{border:"1px solid #EFEFEF","border-radius":"0 0 10px 10px"},children:[Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Y}),Object(ve.jsx)(jn,{disabled:!0,margin:"0 0.5vw 0 0.5vw",type:"text",name:"subject","data-testid":"subjectInput",value:e.subjectName,onChange:function(e){t(e,"subjectName","selectedSubject")}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Q}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"color",name:"color",value:e.color,"data-testid":"colorInput",onChange:function(e){t(e,"color","selectedSubject")}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:se}),Object(ve.jsxs)("select",{name:"semesters",defaultValue:e.semester,"data-testid":"semesterSelector",onChange:function(e){t(e,"semester","selectedSubject"),t({target:{value:[]}},"titles","selectedSubject")},children:[Object(ve.jsx)("option",{value:1,children:"1"}),Object(ve.jsx)("option",{value:2,children:"2"})]})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(mn,{color:"#2DA283",margin:"0 0.5vw 0 0.5vw",padding:"0.5rem 1rem",width:"fit-content",onClick:function(e){e.preventDefault(),o()},children:$}),"                        "]}),Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",margin:"1vh 0 0.5vh 0"},children:[Object(ve.jsx)(mn,{color:"#db3f3f",margin:"0 1vw",padding:"0.5rem 1rem",width:"fit-content","data-testid":"deleteSubject",onClick:function(t){t.preventDefault(),i(e)},children:ee}),Object(ve.jsx)(mn,{color:"#2DA283",margin:"0 1vw",padding:"0.5rem 1rem",width:"fit-content",onClick:function(t){t.preventDefault(),s(e)},"data-testid":"updateSubject",children:te})]})]}),Object(ve.jsx)(bn,{children:Object(ve.jsx)("h2",{children:_})}),Object(ve.jsxs)(dn,{height:"27.5vh",overflow:"scroll",overflowy:"scroll",margin:"0.5vh 0 0 0",border:"1px solid #EFEFEF",children:[pn(e,n),Object(ve.jsx)(mn,{"data-testid":"addGroupButton",disabled:e.groups.length>9,color:"#2DA283",padding:"1vh",margin:"2%",onClick:function(e){e.preventDefault(),a("group")},children:"+"})]})]})):"",this.props.selectedGroup?xn(this.props.selectedGroup,this.props.sessions,this.props.onChangeField,this.props.onSelectSession,this.props.onChangeCheckBox,this.props.showModal,this.props.onDeleteSession,this.props.onDeleteGroup,this.props.selectedSubject,this.props.checkAvailability):""]}),Object(ve.jsx)(rn,{width:"70%",onClose:this.showTitles,show:this.state.showTitles,children:this.props.selectedSubject?On(this.props.titles,this.props.selectedSubject.titles,this.props.onSelectTitle,this.props.selectedSubject.semester):""})]});var e,t,n,s,a,o,i}}]),n}(h.a.Component);function Sn(e){return e.color.length>6&&"#ffffff"!==e.color&&e.subjectName.length>3}function wn(e,t){return t.groupName.length>3&&t.color.length>6&&"#ffffff"!==t.color&&t.defaultSessionValues.color.length>6&&"#ffffff"!==t.defaultSessionValues.color&&!e.groups.map((function(e){return e.groupName})).includes(t.groupName)}function Cn(e){return e.length>0}function Tn(e,t,n,s){var a=e.map((function(e){return Object(ve.jsx)("option",{value:JSON.stringify(e),children:e.name},e.name)}));return e.forEach((function(e){e.name===s.name&&(s=e)})),Object(ve.jsx)("select",{name:t,id:t,value:JSON.stringify(s),onChange:function(e){n(e,t,"newSession")},style:{marginBottom:"0.5em"},children:a})}var Fn=["","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"];function Nn(e,t,n){var s=Array.from(new Array(7),(function(e,t){return t+1})).map((function(e){return Object(ve.jsx)("option",{value:parseInt(e),children:Fn[e]},Fn[e])}));return Object(ve.jsx)("select",{name:"days",id:"days",defaultValue:e,onChange:function(e){t(e,"day","newSession",null,n)},style:{margin:"0 0.5vw 0 0.5vw"},children:s})}function En(e){return{subjectName:e.subjectName,groupName:e.groupName,color:e.defaultSessionValues.color,teacher:e.defaultSessionValues.teacher,room:e.defaultSessionValues.room,day:1,length:45,startTime:"08:00"}}var An,Dn,Rn=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).handleSessionClick=s.handleSessionClick.bind(Object(v.a)(s)),s.state={loading:!1,sessions:[],subjects:[],titles:[],rooms:[],teachers:[],showModal:!1,showError:!0,error:"error",modalForm:" ",newSubject:{titles:[],color:"#ffffff",subjectName:""},newGroup:{defaultSessionValues:{color:"#ffffff"},color:"#ffffff",groupName:""},newSession:{}},s.setLoading=s.setLoading.bind(Object(v.a)(s)),s.setSessions=s.setSessions.bind(Object(v.a)(s)),s.updateSession=s.updateSession.bind(Object(v.a)(s)),s.createSession=s.createSession.bind(Object(v.a)(s)),s.deleteSession=s.deleteSession.bind(Object(v.a)(s)),s.onSelectSubject=s.onSelectSubject.bind(Object(v.a)(s)),s.onSelectGroup=s.onSelectGroup.bind(Object(v.a)(s)),s.onSelectSession=s.onSelectSession.bind(Object(v.a)(s)),s.onChangeField=s.onChangeField.bind(Object(v.a)(s)),s.onChangeCheckBox=s.onChangeCheckBox.bind(Object(v.a)(s)),s.setSubjects=s.setSubjects.bind(Object(v.a)(s)),s.createSubject=s.createSubject.bind(Object(v.a)(s)),s.updateSubject=s.updateSubject.bind(Object(v.a)(s)),s.updateSubjectName=s.updateSubjectName.bind(Object(v.a)(s)),s.deleteSubject=s.deleteSubject.bind(Object(v.a)(s)),s.createGroup=s.createGroup.bind(Object(v.a)(s)),s.deleteGroup=s.deleteGroup.bind(Object(v.a)(s)),s.showModal=s.showModal.bind(Object(v.a)(s)),s.chooseCreateForm=s.chooseCreateForm.bind(Object(v.a)(s)),s.SelectTitleOfSubject=s.SelectTitleOfSubject.bind(Object(v.a)(s)),s.getRooms=s.getRooms.bind(Object(v.a)(s)),s.setRooms=s.setRooms.bind(Object(v.a)(s)),s.getTimeBlocksOfSession=s.getTimeBlocksOfSession.bind(Object(v.a)(s)),s.setTeachers=s.setTeachers.bind(Object(v.a)(s)),s.checkAvailability=s.checkAvailability.bind(Object(v.a)(s)),s.errorCallback=s.errorCallback.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"errorCallback",value:function(e){this.setState({showModal:!0,showError:!0,error:e})}},{key:"checkAvailability",value:function(e){this.context.getAvailableRooms(this.state.selectedSubject.semester,e.day,this.getTimeBlocksOfSession(e),this.setRooms),this.context.getAvailableTeachers(this.state.selectedSubject.semester,e.day,this.getTimeBlocksOfSession(e),this.setTeachers)}},{key:"getRooms",value:function(){var e=this;this.context.getRooms((function(t){e.setState({rooms:t})}))}},{key:"getTimeBlocksOfSession",value:function(e){var t=e.startTime.split(":"),n=60*parseInt(t[0])+parseInt(t[1]),s=1+((n-480)/15>>0),a=Math.ceil((n+parseInt(e.length)-480)/15)+1;return Array.from(new Array(a-s),(function(e,t){return t+s}))}},{key:"chooseCreateForm",value:function(e,t,n){switch(e){case"subject":return s=this.state.newSubject,a=this.onChangeField,o=this.createSubject,i=this.showModal,Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsx)("h2",{children:re}),Object(ve.jsxs)(dn,{children:[Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Y}),Object(ve.jsx)(jn,{"data-testid":"nameInput",margin:"0 0.5vw 0 0.5vw",type:"text",name:"subject",value:s.subjectName,onChange:function(e){a(e,"subjectName","newSubject")}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Q}),Object(ve.jsx)(jn,{"data-testid":"colorInput",margin:"0 0.5vw 0 0.5vw",type:"color",name:"color",value:s.color,onChange:function(e){a(e,"color","newSubject")}})]}),Object(ve.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",margin:"auto"},children:Object(ve.jsx)(mn,{disabled:!Sn(s),color:"#2DA283",margin:"0 1vw",padding:"0.5rem 1rem",width:"fit-content",onClick:function(e){e.preventDefault(),o(s),i()},children:ne})})]})]});case"group":return function(e,t,n,s,a,o){return Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsx)("h2",{children:le}),Object(ve.jsxs)(dn,{height:"36vh",overflowy:"auto",style:{border:"1px solid #EFEFEF","border-radius":"0 0 10px 10px"},children:[Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Y}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"text",name:"subject",value:t.groupName,onChange:function(e){n(e,"groupName","newGroup")}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Q}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"color",name:"color",value:t.color,onChange:function(e){n(e,"color","newGroup")}})]}),Object(ve.jsxs)(gn,{margin:"0 0.5vw 0 0.5vw",children:[" ",Object(ve.jsx)("b",{children:be})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Q}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"color",name:"color",value:t.defaultSessionValues.color,onChange:function(e){n(e,"color","newGroup","defaultSessionValues")}})]}),Object(ve.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",margin:"0 0 1vh 0"},children:Object(ve.jsx)(mn,{disabled:!wn(e,t),color:"#2DA283",margin:"0 1vw",padding:"0.5rem 1rem",width:"fit-content",onClick:function(n){n.preventDefault(),a(e,t),o()},children:ne})})]})]})}(t,this.state.newGroup,this.onChangeField,this.onChangeCheckBox,this.createGroup,this.showModal);case"session":return function(e,t,n,s,a,o,i,c,r){return Object(ve.jsx)(h.a.Fragment,{children:Object(ve.jsxs)(dn,{children:[Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:H}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",disabled:!0,type:"text",name:"subject",value:e.subjectName})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:W}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",disabled:!0,type:"text",name:"group",value:e.groupName})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Q}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"color",name:"color",value:t.color,onChange:function(e){n(e,"color","newSession")}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:K}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"time",name:"startTime",value:t.startTime,onChange:function(e){n(e,"startTime","newSession",null,r)}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:q}),Nn(t.day,n,r)]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:Z}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"number",name:"length",value:t.length,onChange:function(e){n(e,"length","newSession",null,r)}})]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:z}),Tn(i,"room",n,t.room)]}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",children:P}),Tn(c,"teacher",n,t.teacher)]}),Object(ve.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",margin:"0 0 1vh 0"},children:Object(ve.jsx)(mn,{disabled:!Cn(t),color:"#2DA283",margin:"0 1vw",padding:"0.5rem 1rem",width:"fit-content",onClick:function(e){e.preventDefault(),a(t),o()},children:ne})})]})})}(n,this.state.newSession,this.onChangeField,this.onChangeCheckBox,this.createSession,this.showModal,this.state.rooms,this.state.teachers,this.checkAvailability);default:return""}var s,a,o,i}},{key:"showModal",value:function(e){this.setState((function(t){return{showModal:!t.showModal,modalForm:e,selectedSession:null,showError:!1}}))}},{key:"onChangeField",value:function(e,t,n,s,a){var o=this,i=e.target.value;["room","teacher"].includes(t)&&(i=JSON.parse(i)),"length"!==t||i||(i=0),["day","length"].includes(t)&&(i=parseInt(i));var c=this.state[n];s?c[s][t]=i:c[t]=i,this.setState(Object(It.a)({},n,c),(function(){a&&a(o.state.newSession)}))}},{key:"onChangeCheckBox",value:function(e,t,n){n?(t[n]=!t[n],this.setState(Object(It.a)({},e,t))):this.setState((function(t){return Object(It.a)({},e,!t[e])}))}},{key:"onSelectSubject",value:function(e){this.setState({selectedSubject:JSON.parse(JSON.stringify(e)),originalSelectedSubject:e,newGroup:{defaultSessionValues:{color:"#ffffff"},color:"#ffffff",groupName:""},selectedGroup:null,selectedSession:null})}},{key:"onSelectGroup",value:function(e){this.setState({selectedGroup:JSON.parse(JSON.stringify(e)),selectedSession:null,newSession:En(e)}),this.context.loadSessionsOfSubjectGroup(e.subjectName,e.groupName,this.setSessions)}},{key:"onSelectSession",value:function(e){this.setState({selectedSession:JSON.parse(JSON.stringify(e)),rooms:[e.room],teachers:[e.teacher]})}},{key:"handleSessionClick",value:function(e){this.setState({selectedSession:e})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setSessions",value:function(e){this.setState({sessions:e})}},{key:"updateSession",value:function(e){var t=this;this.context.updateSession(e,(function(){t.context.loadSessionsOfSubjectGroup(t.state.selectedSubject.subjectName,t.state.selectedGroup.groupName,t.setSessions)}),this.state.selectedSubject.semester)}},{key:"createSession",value:function(e){var t=this;this.context.createSession(e,(function(){t.context.loadSessionsOfSubjectGroup(t.state.selectedSubject.subjectName,t.state.selectedGroup.groupName,t.setSessions)}),this.state.selectedSubject.semester)}},{key:"createSubject",value:function(e){var t=this;e.semester=1,this.context.createSubject(e,(function(){t.context.getSubjects(t.setSubjects)}))}},{key:"deleteSubject",value:function(e){var t=this;this.context.deleteSubject(e,(function(){t.context.getSubjects(t.setSubjects),t.setState((function(e){return{selectedSubject:null,selectedGroup:null,selectedSession:null}}))}))}},{key:"createGroup",value:function(e,t){var n=this;t.subjectName=e.subjectName,t.type="group",t.defaultSessionValues.teacher={name:"Sin Asignar",checkConcurrency:!1},t.defaultSessionValues.room={name:"Sin Asignar",checkConcurrency:!1},t.defaultSessionValues.length=45,e.groups.push(t),this.context.updateSubject(e,(function(){n.setState((function(t){return{subjects:[].concat(Object(Ge.a)(t.subjects.filter((function(t){return t.id!==e.id}))),[e]),newGroup:{defaultSessionValues:{color:"#ffffff"},color:"#ffffff",groupName:""}}}))}))}},{key:"deleteGroup",value:function(e,t){var n=this;this.context.deleteGroup(e,t,(function(){n.context.getSubjects(n.setSubjects),n.setState((function(e){return{selectedGroup:null,selectedSession:null}}))}))}},{key:"setSubjects",value:function(e){this.setState({subjects:e,selectedSubject:null,selectedGroup:null,selectedSession:null})}},{key:"setRooms",value:function(e){this.state.selectedSession&&(e.map((function(e){return e.name})).indexOf(this.state.selectedSession.room.name)<0&&(e=[].concat(Object(Ge.a)(e),[this.state.selectedSession.room])));this.setState({rooms:e})}},{key:"setTeachers",value:function(e){this.state.selectedSession&&(e.map((function(e){return e.name})).indexOf(this.state.selectedSession.teacher.name)<0&&(e=[].concat(Object(Ge.a)(e),[this.state.selectedSession.teacher])));this.setState({teachers:e})}},{key:"updateSubject",value:function(e){var t=this,n=function(){t.context.getSubjects(t.setSubjects),t.setState((function(e){return{selectedSubject:null,selectedGroup:null,selectedSession:null}}))};e.subjectName!==this.state.originalSelectedSubject.subjectName?this.updateSubjectName(e,this.state.originalSelectedSubject.subjectName,n):this.context.updateSubject(e,n,e.semester!==this.state.originalSelectedSubject.semester)}},{key:"deleteSession",value:function(e){var t=this;this.context.deleteSession(e,(function(){t.setState((function(t){return{sessions:t.sessions.filter((function(t){return t.id!==e.id}))}}))}),this.state.selectedSubject.semester)}},{key:"updateSubjectName",value:function(e,t,n){this.context.updateSubjectName(e,t,n)}},{key:"SelectTitleOfSubject",value:function(e,t){var n=this.state.selectedSubject.titles,s=n.map((function(e){return e.titleName})).indexOf(e.titleName);s>-1?t?n.splice(s,1):n[s]=e:(e.semester=parseInt(this.state.selectedSubject.semester),n.push(e));var a=this.state.selectedSubject;a.titles=n,this.setState({selectedSubject:a})}},{key:"componentDidMount",value:function(){var e=this;this.context.setLoadingCallback(this.setLoading),this.context.setErrorCallback(this.errorCallback),this.context.getSubjects(this.setSubjects),this.context.loadTitles((function(t){e.setState({titles:t})}))}},{key:"render",value:function(){var e,t,n=this;return Object(ve.jsxs)(We,{active:this.state.loading,spinner:!0,text:ce,children:[Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[Object(ve.jsx)(hn,{}),Object(ve.jsxs)(Le,{children:[Object(ve.jsxs)(Ve,{children:[Object(ve.jsx)(Ue,{children:Object(ve.jsx)("h2",{children:L})}),Object(ve.jsxs)(Je,{children:[(e=this.state.subjects,t=this.onSelectSubject,e.map((function(e){return Object(ve.jsx)(mn,{color:e.color,padding:"1vh",margin:"2%",onClick:function(){t(e)},children:e.subjectName})}))),Object(ve.jsx)(_e,{onClick:function(){n.showModal("subject")},children:"+"})]})]}),Object(ve.jsx)(Be,{children:Object(ve.jsx)(kn,{showModal:this.showModal,selectedSubject:this.state.selectedSubject,newSubject:this.state.newSubject,selectedGroup:this.state.selectedGroup,sessions:this.state.sessions,onSelectGroup:this.onSelectGroup,onSelectSession:this.onSelectSession,onChangeField:this.onChangeField,onChangeCheckBox:this.onChangeCheckBox,updateSubject:this.updateSubject,titles:this.state.titles,onSelectTitle:this.SelectTitleOfSubject,onDeleteSession:this.deleteSession,onDeleteGroup:this.deleteGroup,deleteSubject:this.deleteSubject,checkAvailability:function(){return n.checkAvailability({day:1,length:45,startTime:"08:00",room:{checkConcurrency:!1,name:"Sin Asignar"},teacher:{checkConcurrency:!1,name:"Sin Asignar"}})}})}),Object(ve.jsxs)(Ve,{children:[Object(ve.jsx)(Ue,{children:Object(ve.jsx)("h2",{children:X})}),Object(ve.jsx)(Je,{children:null!=this.state.selectedSession?Object(ve.jsx)(_t,{id:this.state.selectedSession.id,selectedSession:this.state.selectedSession,updateSession:this.updateSession,rooms:this.state.rooms,teachers:this.state.teachers,checkAvailability:function(e){n.context.getAvailableRooms(n.state.selectedSubject.semester,e.day,n.getTimeBlocksOfSession(e),n.setRooms),n.context.getAvailableTeachers(n.state.selectedSubject.semester,e.day,n.getTimeBlocksOfSession(e),n.setTeachers)}},this.state.selectedSession.id):""})]})]}),Object(ve.jsx)(ze,{})]}),Object(ve.jsx)(rn,{width:"60%",onClose:this.showModal,show:this.state.showModal,children:this.state.showError?this.state.error:this.chooseCreateForm(this.state.modalForm,this.state.selectedSubject,this.state.selectedGroup)})]})}}]),n}(h.a.Component);Rn.contextType=dt;var Gn=w.a.div(An||(An=Object(O.a)(["\ndisplay:flex;\nflex-direction:column;\n\nalign-items: bottom;\n\nflex-wrap: ",";\n\nheight:",";\nwidth:",";\nmax-width: ",";\noverflow: ",";\noverflow-x: ",";\noverflow-y: ",";\n\nmargin: ",";\nborder: 1px solid #EFEFEF;\nborder-radius: 0 0 10px 10px;\n"])),(function(e){return e.wrap?e.wrap:"nowrap"}),(function(e){return e.height?e.height:"auto"}),(function(e){return e.width?e.width:"auto"}),(function(e){return e.width?e.width:"auto"}),(function(e){return e.overflow?e.overflow:"none"}),(function(e){return e.overflowx?e.overflowx:"hidden"}),(function(e){return e.overflowy?e.overflowy:"hidden"}),(function(e){return e.margin?e.margin:"0.5vh 0 1vh 0"})),In=w.a.div(Dn||(Dn=Object(O.a)(["\ndisplay: flex;\nflexDirection: row;\nwidth: 100%;\njustifyContent: space-between;\n"]))),Mn=function(e){var t,n=e.resource;return Object(ve.jsxs)(In,{children:[Object(ve.jsx)(_e,{background:"#e7e9eb",onClick:function(e){e.preventDefault()},style:{width:"70%",color:"black"},children:n.information}),(t=n.properties,t.map((function(e){return e.condition?Object(ve.jsx)(_e,{background:"#969696",disabled:!0,style:{width:"20%",padding:"0"},children:e.data}):Object(ve.jsx)("div",{style:{width:"20%",padding:"0",margin:"0.5em"}})}))),Object(ve.jsx)(_e,{background:"#a83535",onClick:function(e){e.preventDefault(),n.delete()},style:{width:"10%"},children:ee})]})};function Ln(e,t){return{information:e.roomName,properties:[{data:fe,condition:!e.checkConcurrency}],delete:t}}function Bn(e,t,n,s,a){return Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsx)("h2",{children:ue}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",style:{maxWidth:"90%"},children:Y}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"text",name:"roomName",value:e.roomName,onChange:function(e){t(e.target.value,"roomName")}})]}),Object(ve.jsxs)(fn,{style:{flexDirection:"row"},children:[Object(ve.jsx)(jn,{margin:"0.5vh 0.5vw 0 0",type:"checkbox",checked:n,value:n,onChange:function(e){s()}}),Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",style:{maxWidth:"90%"},children:Object(ve.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:je})})]}),Object(ve.jsx)(_e,{disabled:(o=e,!(o.roomName.length>3)),onClick:function(t){a(e)},children:ne})]});var o}var Vn=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).state={show:!1,newRoom:{roomName:""},rooms:[],checkConcurrency:!0},s.setLoading=s.setLoading.bind(Object(v.a)(s)),s.showModal=s.showModal.bind(Object(v.a)(s)),s.OnChangeRoomValue=s.OnChangeRoomValue.bind(Object(v.a)(s)),s.getRooms=s.getRooms.bind(Object(v.a)(s)),s.createRoom=s.createRoom.bind(Object(v.a)(s)),s.deleteRoom=s.deleteRoom.bind(Object(v.a)(s)),s.onChangeConcurrency=s.onChangeConcurrency.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"componentDidMount",value:function(){this.context.setLoadingCallback(this.setLoading),this.getRooms()}},{key:"OnChangeRoomValue",value:function(e,t){var n=this.state.newRoom;n[t]=e,this.setState({newRoom:n})}},{key:"onChangeConcurrency",value:function(){this.setState((function(e){return{checkConcurrency:!e.checkConcurrency}}))}},{key:"getRooms",value:function(){var e=this;this.context.getRooms((function(t){e.setState({rooms:t})}))}},{key:"createRoom",value:function(e){e.checkConcurrency=this.state.checkConcurrency,this.context.createRoom(e,this.getRooms),this.setState({checkConcurrency:!0})}},{key:"deleteRoom",value:function(e){this.context.deleteRoom(e,this.getRooms)}},{key:"showModal",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){var e,t,n=this;return Object(ve.jsx)(We,{active:this.state.loading,spinner:!0,text:ce,children:Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[Object(ve.jsx)(Xe,{}),Object(ve.jsx)(ln,{justify:"center",children:Object(ve.jsxs)(un,{children:[Object(ve.jsx)(bn,{children:Object(ve.jsx)("h2",{children:V})}),Object(ve.jsxs)(Gn,{height:"70vh",width:"60vw",overflowy:"auto",children:[(e=this.state.rooms,t=this.deleteRoom,this.getRooms,e.map((function(e){return Object(ve.jsx)(Mn,{resource:Ln(e,(function(){t(e)}))})}))),Object(ve.jsx)(_e,{onClick:function(e){e.preventDefault(),n.showModal()},children:Object(ve.jsx)("b",{children:"+"})})]})]})}),Object(ve.jsx)(rn,{onClose:this.showModal,show:this.state.show,children:Bn(this.state.newRoom,this.OnChangeRoomValue,this.state.checkConcurrency,this.onChangeConcurrency,this.createRoom)})]})})}}]),n}(h.a.Component);Vn.contextType=dt;var Un=function(e){return Object(ve.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:[Object(ve.jsx)(_e,{style:{padding:"3vh 3vw",cursor:"pointer"},onClick:function(){e.logOut()},children:me}),e.loggedUser?"":Object(ve.jsx)(g.a,{to:"/Login"})]})};var Jn=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).state={show:!1,newTeacher:{teacherName:""},teachers:[],checkConcurrency:!0},s.setLoading=s.setLoading.bind(Object(v.a)(s)),s.showModal=s.showModal.bind(Object(v.a)(s)),s.OnChangeTeacherValue=s.OnChangeTeacherValue.bind(Object(v.a)(s)),s.getTeachers=s.getTeachers.bind(Object(v.a)(s)),s.createTeacher=s.createTeacher.bind(Object(v.a)(s)),s.deleteTeacher=s.deleteTeacher.bind(Object(v.a)(s)),s.onChangeConcurrency=s.onChangeConcurrency.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"componentDidMount",value:function(){this.context.setLoadingCallback(this.setLoading),this.getTeachers()}},{key:"OnChangeTeacherValue",value:function(e,t){var n=this.state.newTeacher;n[t]=e,this.setState({newTeacher:n})}},{key:"onChangeConcurrency",value:function(){this.setState((function(e){return{checkConcurrency:!e.checkConcurrency}}))}},{key:"getTeachers",value:function(){var e=this;this.context.getTeachers((function(t){e.setState({teachers:t})}))}},{key:"createTeacher",value:function(e){e.checkConcurrency=this.state.checkConcurrency,this.context.createTeacher(e,this.getTeachers),this.setState({checkConcurrency:!0,newTeacher:{teacherName:""}})}},{key:"deleteTeacher",value:function(e){this.context.deleteTeacher(e,this.getTeachers)}},{key:"showModal",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){var e,t,n,s,a=this;return Object(ve.jsx)(We,{active:this.state.loading,spinner:!0,text:ce,children:Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[Object(ve.jsx)(Xe,{}),Object(ve.jsx)(Le,{style:{marginLeft:"-5%"},children:Object(ve.jsx)(ln,{children:Object(ve.jsxs)(un,{children:[Object(ve.jsx)(bn,{children:Object(ve.jsx)("h2",{children:U})}),Object(ve.jsxs)(dn,{height:"70vh",width:"60vw",overflowy:"auto",style:{border:"1px solid #EFEFEF","border-radius":"0 0 10px 10px"},children:[(t=this.state.teachers,n=this.deleteTeacher,s=this.getTeachers,t.map((function(e){return Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between"},children:[Object(ve.jsx)(_e,{background:"#e7e9eb",onClick:function(e){e.preventDefault()},style:{width:"70%",color:"black"},children:e.teacherName}),!1===e.checkConcurrency?Object(ve.jsx)(_e,{background:"#969696",disabled:!0,style:{width:"20%",padding:"0"},children:fe}):Object(ve.jsx)("div",{style:{width:"20%",padding:"0",margin:"0.5em"}}),Object(ve.jsx)(_e,{background:"#a83535",onClick:function(t){t.preventDefault(),n(e,s)},style:{width:"10%"},children:ee})]})}))),Object(ve.jsx)(_e,{onClick:function(e){e.preventDefault(),a.showModal()},children:Object(ve.jsx)("b",{children:"+"})})]})]})})}),Object(ve.jsxs)(rn,{onClose:this.showModal,show:this.state.show,children:[Object(ve.jsx)("h2",{children:de}),Object(ve.jsxs)(fn,{children:[Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",style:{maxWidth:"90%"},children:Y}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"text",name:"teacherName",value:this.state.newTeacher.teacherName,onChange:function(e){a.OnChangeTeacherValue(e.target.value,"teacherName")}})]}),Object(ve.jsxs)(fn,{style:{flexDirection:"row"},children:[Object(ve.jsx)(jn,{margin:"0.5vh 0.5vw 0 0",type:"checkbox",checked:this.state.checkConcurrency,value:this.state.checkConcurrency,onChange:function(e){a.onChangeConcurrency()}}),Object(ve.jsx)(gn,{margin:"0 0.5vw 0 0.5vw",style:{maxWidth:"90%"},children:Object(ve.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:je})})]}),Object(ve.jsx)(_e,{disabled:(e=this.state.newTeacher,!(e.teacherName.length>5)),onClick:function(e){a.createTeacher(a.state.newTeacher)},children:ne})]})]})})}}]),n}(h.a.Component);Jn.contextType=dt;var _n=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).state={show:!1,titles:[],newTitle:{titleName:"",semesters:0}},s.setLoading=s.setLoading.bind(Object(v.a)(s)),s.showModal=s.showModal.bind(Object(v.a)(s)),s.OnChangeTitleValue=s.OnChangeTitleValue.bind(Object(v.a)(s)),s.getTitles=s.getTitles.bind(Object(v.a)(s)),s.createTitle=s.createTitle.bind(Object(v.a)(s)),s.deleteTitle=s.deleteTitle.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"getTitles",value:function(){var e=this;this.context.loadTitles((function(t){return e.setState({titles:t})}))}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"componentDidMount",value:function(){this.context.setLoadingCallback(this.setLoading),this.getTitles()}},{key:"OnChangeTitleValue",value:function(e,t){var n=this.state.newTitle;n[t]=e,this.setState({newTitle:n})}},{key:"createTitle",value:function(e){var t=this;this.context.createTitle(e,(function(){t.getTitles(),t.showModal()}))}},{key:"deleteTitle",value:function(e){var t=this;this.context.deleteTitle(e,(function(){t.getTitles()}))}},{key:"createTeacher",value:function(e){e.checkConcurrency=this.state.checkConcurrency,this.context.createTeacher(e,this.getTeachers),this.setState({checkConcurrency:!0,newTeacher:{}})}},{key:"deleteTeacher",value:function(e){this.context.deleteTeacher(e,this.getTeachers)}},{key:"showModal",value:function(){this.setState({show:!this.state.show})}},{key:"render",value:function(){var e,t,n,s,a=this;return Object(ve.jsx)(We,{active:this.state.loading,spinner:!0,text:ce,children:Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[Object(ve.jsx)(Xe,{}),Object(ve.jsx)(Le,{style:{marginLeft:"-5%"},children:Object(ve.jsx)(ln,{children:Object(ve.jsxs)(un,{children:[Object(ve.jsx)(bn,{children:Object(ve.jsx)("h2",{children:J})}),Object(ve.jsxs)(dn,{height:"70vh",width:"60vw",overflowy:"auto",style:{border:"1px solid #EFEFEF","border-radius":"0 0 10px 10px"},children:[(t=this.state.titles,n=this.deleteTitle,s=this.getTitles,t.map((function(e){return Object(ve.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between"},children:[Object(ve.jsx)(_e,{background:"#e7e9eb",onClick:function(e){e.preventDefault()},style:{width:"70%",color:"black"},children:e.titleName}),Object(ve.jsxs)(_e,{background:"#969696",disabled:!0,style:{width:"20%"},children:[ge,": ",e.semesters]}),Object(ve.jsx)(_e,{background:"#a83535",onClick:function(t){t.preventDefault(),n(e,s)},style:{width:"10%"},children:ee})]})}))),Object(ve.jsx)(_e,{onClick:function(e){e.preventDefault(),a.showModal()},children:Object(ve.jsx)("b",{children:"+"})})]})]})})}),Object(ve.jsxs)(rn,{onClose:this.showModal,show:this.state.show,children:[Object(ve.jsx)("h2",{children:he}),Object(ve.jsxs)(fn,{style:{},children:[Object(ve.jsx)(gn,{margin:"1 0.5vw 0 0.5vw",style:{maxWidth:"90%"},children:Y}),Object(ve.jsx)(jn,{type:"text",name:"titleName",value:this.state.newTitle.titleName,onChange:function(e){a.OnChangeTitleValue(e.target.value,"titleName")}}),Object(ve.jsx)(gn,{margin:"1 0.5vw 0 0.5vw",style:{maxWidth:"90%"},children:ge}),Object(ve.jsx)(jn,{type:"number",name:"semesters",value:this.state.newTitle.semesters,onChange:function(e){a.OnChangeTitleValue(e.target.value,"semesters")}})]}),Object(ve.jsx)(_e,{disabled:(e=this.state.newTitle,!(e.titleName.length>3&&e.semesters>0&&e.semesters<9)),onClick:function(e){a.createTitle(a.state.newTitle)},children:ne})]})]})})}}]),n}(h.a.Component);_n.contextType=dt;var zn=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;return Object(m.a)(this,n),(s=t.call(this,e)).setLoading=s.setLoading.bind(Object(v.a)(s)),s.state={email:"",password:"",loading:!1,errorMsg:""},s.setErrorMsg=s.setErrorMsg.bind(Object(v.a)(s)),s.setEmail=s.setEmail.bind(Object(v.a)(s)),s.setPassword=s.setPassword.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setErrorMsg",value:function(e){this.setState({errorMsg:e})}},{key:"setEmail",value:function(e){this.setState({email:e})}},{key:"setPassword",value:function(e){this.setState({password:e})}},{key:"componentDidMount",value:function(){this.context.setLoadingCallback(this.setLoading),this.context.setErrorCallback(this.setErrorMsg)}},{key:"render",value:function(){var e=this;return Object(ve.jsx)(We,{style:{heigth:"80vh"},active:this.state.loading,spinner:!0,text:"Loading your content...",children:Object(ve.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",height:"90vh"},children:[this.props.loggedUser?"Welcome back!":Object(ve.jsxs)("div",{style:{boxShadow:"10px",color:"white",border:"solid",borderColor:"#2DA283",display:"flex",flexDirection:"column",background:"#E7E9EB",alignItems:"center",justifyContent:"center",width:"40vw",borderRadius:"4px"},children:[Object(ve.jsx)("h2",{style:{color:"#2DA283"},children:R}),Object(ve.jsx)(gn,{style:{color:"#2DA283"},children:G}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"text",name:"email",value:this.state.email,onChange:function(t){e.setEmail(t.target.value)},style:{width:"80%",height:"3vh",borderRadius:"5px",borderWidth:"1px"}}),Object(ve.jsx)(gn,{style:{color:"#2DA283"},children:I}),Object(ve.jsx)(jn,{margin:"0 0.5vw 0 0.5vw",type:"password",name:"email",value:this.state.password,onChange:function(t){e.setPassword(t.target.value)},style:{width:"80%",height:"3vh",borderRadius:"5px",borderWidth:"1px"}}),Object(ve.jsx)(_e,{background:"#F5AB00",onClick:function(t){e.context.auth(e.state.email,e.state.password,(function(e){}))},children:M})]}),Object(ve.jsx)("div",{style:{color:"#a83535",marginTop:"1vh"},children:this.state.errorMsg})]})})}}]),n}(h.a.Component);zn.contextType=dt;var Pn=[{id:"string",subjectName:"Test Subject",color:"string",groups:[{id:"some id",groupName:"Test Group",subjectName:"string",color:"string",type:"string",defaultSessionValues:{color:"string",length:50,room:{name:"string"},teacher:{name:"string"}}}],titles:[{semester:1,titleName:"Test Title"}]}],Wn=[{id:"asdasc-123124jp-asdadipkw",startTime:"09:30",length:60,color:"#EFEFEF",subject:"Subject X",group:"Group N",room:{name:"Test Room",checkConcurrency:!0},teacher:{name:"Test Teacher",checkConcurrency:!0},day:2},{id:"asdasc-asdasdacaasdadipkw",startTime:"11:30",length:60,color:"#EFEFEF",subject:"Subject X",group:"Group N",room:{name:"Big Room"},teacher:{name:"Teacher X"},day:2}],Hn=[{id:"string",titleName:"Test Title",semesters:3}],Xn=[{id:"string",teacherName:"Test Teacher",checkConcurrency:!0}],qn=[{id:"string",roomName:"Test Room",checkConcurrency:!0}],Kn=function(){function e(t,n){Object(m.a)(this,e),this.baseurl=t,this.loadingCallback=n,this.errorCallback={},this.user={email:"TestUser@test.test"}}return Object(p.a)(e,[{key:"logOut",value:function(e){e()}},{key:"auth",value:function(e,t,n){this.user={email:e},n(this.user)}},{key:"getUser",value:function(){return this.user}},{key:"setErrorCallback",value:function(e){this.errorCallback=e}},{key:"setLoadingCallback",value:function(e){this.loadingCallback=e}},{key:"getTeachers",value:function(e){e(Xn)}},{key:"createTeacher",value:function(e,t){t()}},{key:"deleteTeacher",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAvailableTeachers",value:function(e,t,n,s){var a=[];Xn.forEach((function(e){a.push({name:e.teacherName,checkConcurrency:e.checkConcurrency})})),s(a)}},{key:"getRooms",value:function(e){e(qn)}},{key:"getAvailableRooms",value:function(e,t,n,s){var a=[];qn.forEach((function(e){a.push({name:e.roomName,checkConcurrency:e.checkConcurrency})})),s(a)}},{key:"createRoom",value:function(e,t){t()}},{key:"deleteRoom",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadTitles",value:function(e){e(Hn)}},{key:"createTitle",value:function(e,t){t()}},{key:"deleteTitle",value:function(e,t){t()}},{key:"loadSubjectsOfTitle",value:function(e,t){t(Pn)}},{key:"loadSessionsOfSubjects",value:function(e,t){t(Wn)}},{key:"getSessionsOfTeacher",value:function(e,t){t(Wn)}},{key:"getSessionsOfSubjectGroup",value:function(e,t,n){n(Wn)}},{key:"getSessionsOfRoom",value:function(e,t){t(Wn)}},{key:"updateSession",value:function(e,t,n){t()}},{key:"createSession",value:function(e,t,n){t()}},{key:"deleteSession",value:function(e,t,n){t()}},{key:"getSubjectsOfTeacher",value:function(e,t){t(Pn)}},{key:"updateSubject",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n,s){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}()},{key:"updateSubjectName",value:function(e,t,n){n()}},{key:"getSubjects",value:function(e){e(Pn)}},{key:"createSubject",value:function(e,t){t()}},{key:"deleteSubject",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(e,t,n){n()}},{key:"checkDisponibilityForSession",value:function(e,t,n){n({teacher:!0,room:!0})}}]),e}(),Zn=n(17);function Qn(e){var t=e.startTime.split(":"),n=60*parseInt(t[0])+parseInt(t[1]),s=1+((n-480)/15>>0),a=Math.ceil((n+parseInt(e.length)-480)/15)+1;return console.log("time "+t+" - startMinute"+n+" - row "+s+"- rowend "+a),Array.from(new Array(a-s),(function(e,t){return t+s}))}n(82);var Yn=function(){function e(t,n,s){Object(m.a)(this,e);var a={apiKey:"AIzaSyDuOEZm-US7qOfa8-hb-eqsAfSFBw7NXMc".trim(),authDomain:"tfg-calendar-310123.firebaseapp.com".trim(),projectId:"tfg-calendar-310123".trim(),storageBucket:"tfg-calendar-310123.appspot.com".trim(),messagingSenderId:"409049602115".trim(),appId:"1:409049602115:web:49dd951679d464d9f61cf6".trim()};if(!Zn.a.apps.length)try{Zn.a.initializeApp(a),this.db=Zn.a.firestore()}catch(o){console.log("captured "+o)}this.loadingCallback=n,this.errorCallback={},Zn.a.auth().onAuthStateChanged((function(e){s(!!e&&e.email)}))}return Object(p.a)(e,[{key:"logOut",value:function(e){Zn.a.auth().signOut().then((function(){e()})).catch((function(e){}))}},{key:"auth",value:function(e,t,n){var s=this;this.loadingCallback(!0),Zn.a.auth().signInWithEmailAndPassword(e,t).then((function(e){s.loadingCallback(!1);var t=e.user;n(t)})).catch((function(e){s.loadingCallback(!1);var t=e.code,n=e.message;s.errorCallback&&s.errorCallback(t+" - "+n)}))}},{key:"getUser",value:function(){return Zn.a.auth().currentUser}},{key:"setErrorCallback",value:function(e){this.errorCallback=e}},{key:"setLoadingCallback",value:function(e){this.loadingCallback=e}},{key:"getTeachers",value:function(e){var t=this;this.loadingCallback(!0),this.db.collection("teachers").get().then((function(n){t.loadingCallback(!1);var s=[];n.forEach((function(e){var t=e.data();s.push(t)})),t.loadingCallback(!1),e(s)})).catch((function(e){t.errorCallback(e)}))}},{key:"createTeacher",value:function(e,t){var n=this;this.loadingCallback(!0);var s=this.db.batch(),a=this.db.collection("teachers").doc(e.teacherName);s.set(a,e);var o,i,c=this.db.collection("teachersOcupancy"),r={};if(e.checkConcurrency)for(o=1;o<53;o++)r[o]=Zn.a.firestore.FieldValue.arrayUnion(e.teacherName);else r.concurrents=Zn.a.firestore.FieldValue.arrayUnion(e.teacherName);for(i=1;i<3;i++){var l;for(l=1;l<8;l++)s.update(c.doc(i+"-"+l),r)}s.commit().then((function(){n.loadingCallback(!1),t()})).catch((function(e){n.errorCallback(e)}))}},{key:"deleteTeacher",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){var s,a,o,i,c,r,l,u=this;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.loadingCallback(!0),s=this.db.batch(),a=this.db.collection("teachers").doc(t.teacherName),s.delete(a),o=this.db.collection("teachersOcupancy"),i={},c=1;c<53;c++)i[c]=Zn.a.firestore.FieldValue.arrayRemove(t.teacherName);for(r=1;r<3;r++)for(l=1;l<8;l++)s.update(o.doc(r+"-"+l),i);return e.next=10,this.db.collection("sessions").where("teacher.name","==",t.teacherName).get();case 10:e.sent.docs.forEach((function(e){var t=e.data();t.id=e.id,t.teacher={name:"Sin Asignar",checkConcurrency:!1},s.update(u.db.collection("sessions").doc(t.id),t)})),s.commit().then((function(){u.loadingCallback(!1),n()})).catch((function(e){u.errorCallback(e)}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAvailableTeachers",value:function(e,t,n,s){var a=this;this.loadingCallback(!0),this.db.collection("teachersOcupancy").doc(parseInt(e-1)%2+1+"-"+t).get().then((function(e){var t,o=[];n.length>0&&n.every((function(t){return t in e.data()}))&&(n.forEach((function(n){t=t?t.filter((function(t){return e.data()[n].includes(t)})):e.data()[n]})),t.forEach((function(e){o.push({name:e,checkConcurrency:!0})}))),e.data().concurrents.forEach((function(e){o.push({name:e,checkConcurrency:!1})})),a.loadingCallback(!1),s(o)})).catch((function(e){a.errorCallback(e)}))}},{key:"getRooms",value:function(e){var t=this;this.loadingCallback(!0),this.db.collection("rooms").get().then((function(n){t.loadingCallback(!1);var s=[];n.forEach((function(e){var t=e.data();s.push(t)})),t.loadingCallback(!1),e(s)})).catch((function(e){t.errorCallback(e)}))}},{key:"getAvailableRooms",value:function(e,t,n,s){var a=this;this.loadingCallback(!0),this.db.collection("roomsOcupancy").doc(parseInt(e-1)%2+1+"-"+t).get().then((function(e){var t,o=[];n.length>0&&n.every((function(t){return t in e.data()}))&&(n.forEach((function(n){t=t?t.filter((function(t){return e.data()[n].includes(t)})):e.data()[n]})),t.forEach((function(e){o.push({name:e,checkConcurrency:!0})}))),e.data().concurrents.forEach((function(e){o.push({name:e,checkConcurrency:!1})})),a.loadingCallback(!1),s(o)})).catch((function(e){a.errorCallback(e)}))}},{key:"createRoom",value:function(e,t){var n=this;this.loadingCallback(!0);var s=this.db.batch(),a=this.db.collection("rooms").doc(e.roomName);s.set(a,e);var o,i,c=this.db.collection("roomsOcupancy"),r={};if(e.checkConcurrency)for(o=1;o<53;o++)r[o]=Zn.a.firestore.FieldValue.arrayUnion(e.roomName);else r.concurrents=Zn.a.firestore.FieldValue.arrayUnion(e.roomName);for(i=1;i<3;i++){var l;for(l=1;l<8;l++)s.update(c.doc(i+"-"+l),r)}s.commit().then((function(){n.loadingCallback(!1),t()})).catch((function(e){n.errorCallback(e)}))}},{key:"deleteRoom",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){var s,a,o,i,c,r,l,u=this;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadingCallback(!0),s=this.db.batch(),a=this.db.collection("rooms").doc(t.roomName),s.delete(a),o=this.db.collection("roomsOcupancy"),i={},t.checkConcurrency)for(c=1;c<53;c++)i[c]=Zn.a.firestore.FieldValue.arrayRemove(t.roomName);else i.concurrents=Zn.a.firestore.FieldValue.arrayRemove(t.roomName);for(r=1;r<3;r++)for(l=1;l<8;l++)s.update(o.doc(r+"-"+l),i);return e.next=10,this.db.collection("sessions").where("room.name","==",t.roomName).get();case 10:e.sent.docs.forEach((function(e){var t=e.data();t.id=e.id,t.room={name:"Sin Asignar",checkConcurrency:!1},s.update(u.db.collection("sessions").doc(t.id),t)})),s.commit().then((function(){u.loadingCallback(!1),n()})).catch((function(e){u.errorCallback(e)}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadTitles",value:function(e){var t=this;this.loadingCallback(!0),this.db.collection("titles").get().then((function(n){t.loadingCallback(!1);var s=[];n.forEach((function(e){var t=e.data();t.id=e.id,s.push(t)})),e(s)})).catch((function(e){t.errorCallback(e)}))}},{key:"createTitle",value:function(e,t){var n=this;this.db.collection("titles").doc(e.titleName).set({titleName:e.titleName,semesters:parseInt(e.semesters)}).then((function(){t()})).catch((function(e){n.errorCallback(e)}))}},{key:"deleteTitle",value:function(e,t){var n=this;this.db.collection("titles").doc(e.id).delete().then((function(){t()})).catch((function(e){n.errorCallback(e)}))}},{key:"loadSubjectsOfTitle",value:function(e,t){var n=this;this.loadingCallback(!0),this.db.collection("subjects").where("titles","array-contains",e).get().then((function(e){n.loadingCallback(!1);var s=[];e.forEach((function(e){var t=e.data();t.id=e.id,s.push(t)})),t(s)})).catch((function(e){n.errorCallback(e)}))}},{key:"loadSessionsOfSubjects",value:function(e,t){var n=this;this.loadingCallback(!0),this.db.collection("sessions").where("subjectName","in",e).get().then((function(e){n.loadingCallback(!1);var s=[];e.forEach((function(e){var t=e.data();t.id=e.id,s.push(t)})),t(s)})).catch((function(e){n.errorCallback(e)}))}},{key:"getSessionsOfTeacher",value:function(e,t){var n=this;this.loadingCallback(!0),this.db.collection("sessions").where("teacher","==",e).get().then((function(e){n.loadingCallback(!1);var s=[];e.forEach((function(e){var t=e.data();t.id=e.id,s.push(t)})),t(s)})).catch((function(e){n.errorCallback(e)}))}},{key:"getSessionsOfSubjectGroup",value:function(e,t,n){var s=this;this.loadingCallback(!0),this.db.collection("sessions").where("subjectName","==",e).where("groupName","==",t).get().then((function(e){s.loadingCallback(!1);var t=[];e.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),n(t)})).catch((function(e){s.errorCallback(e)}))}},{key:"getSessionsOfRoom",value:function(e){var t=this;this.loadingCallback(!0),this.db.collection("sessions").where("room","==",e).get().then((function(e){t.loadingCallback(!1)})).catch((function(e){t.errorCallback(e)}))}},{key:"updateSession",value:function(e,t,n){var s=this;(0,this.loadingCallback)(!0),this.db.collection("sessions").doc(e.id).get().then((function(a){var o=s.db.batch(),i=s.db.collection("sessions"),c=s.db.collection("roomsOcupancy"),r=s.db.collection("teachersOcupancy"),l=a.data(),u={},d={},h=e.day!==l.day||e.startTime!==l.startTime,b=h||e.room.name!==l.room.name,f=h||e.teacher.name!==l.teacher.name,j=parseInt(n-1)%2+1;b&&l.room.checkConcurrency&&(Qn(l).forEach((function(e){u[e]=Zn.a.firestore.FieldValue.arrayUnion(l.room.name)})),o.update(c.doc(j+"-"+l.day),u)),f&&l.teacher.checkConcurrency&&(Qn(l).forEach((function(e){d[e]=Zn.a.firestore.FieldValue.arrayUnion(l.teacher.name)})),o.update(r.doc(j+"-"+l.day),d));var g={},m={};b&&e.room.checkConcurrency&&(Qn(e).forEach((function(t){g[t]=Zn.a.firestore.FieldValue.arrayRemove(e.room.name)})),o.update(c.doc(j+"-"+e.day),g)),f&&e.teacher.checkConcurrency&&(Qn(e).forEach((function(t){m[t]=Zn.a.firestore.FieldValue.arrayRemove(e.teacher.name)})),o.update(r.doc(j+"-"+e.day),m)),e.length=parseInt(e.length),o.update(i.doc(e.id),e),o.commit().then((function(){s.loadingCallback(!1),t()})).catch((function(e){s.errorCallback(e)}))}))}},{key:"createSession",value:function(e,t,n){var s=this;e.type="session",this.loadingCallback(!0);var a=this.db.batch(),o=this.db.collection("roomsOcupancy"),i=this.db.collection("teachersOcupancy"),c={},r={},l=parseInt(n-1)%2+1;e.room.checkConcurrency&&(Qn(e).forEach((function(t){c[t]=Zn.a.firestore.FieldValue.arrayRemove(e.room.name)})),a.update(o.doc(l+"-"+e.day),c)),e.teacher.checkConcurrency&&(Qn(e).forEach((function(t){r[t]=Zn.a.firestore.FieldValue.arrayRemove(e.teacher.name)})),a.update(i.doc(l+"-"+e.day),r)),delete e.id,e.length=parseInt(e.length);var u=this.db.collection("sessions").doc();a.set(u,e),a.commit().then((function(){s.loadingCallback(!1),t()})).catch((function(e){s.errorCallback(e)}))}},{key:"deleteSession",value:function(e,t,n){var s=this;this.loadingCallback(!0);var a=this.db.batch();this.deleteSessionBatch(e,n,a),a.commit().then((function(){s.loadingCallback(!1),t()})).catch((function(e){s.errorCallback(e)}))}},{key:"deleteSessionBatch",value:function(e,t,n){var s=this.db.collection("roomsOcupancy"),a=this.db.collection("teachersOcupancy"),o={},i={},c=parseInt(t-1)%2+1;e.room.checkConcurrency&&(Qn(e).forEach((function(t){o[t]=Zn.a.firestore.FieldValue.arrayUnion(e.room.name)})),n.update(s.doc(c+"-"+e.day),o)),e.teacher.checkConcurrency&&(Qn(e).forEach((function(t){i[t]=Zn.a.firestore.FieldValue.arrayUnion(e.teacher.name)})),n.update(a.doc(c+"-"+e.day),i));var r=this.db.collection("sessions").doc(e.id);n.delete(r)}},{key:"getSubjectsOfTeacher",value:function(e,t){var n=this;this.loadingCallback(!0),this.db.collection("subjects").where("teachers","array-contains",e).get().then((function(e){n.loadingCallback(!1);var s=[];e.forEach((function(e){var t=e.data();t.id=e.id,s.push(t)})),t(s)}))}},{key:"updateSubject",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n,s){var a,o,i=this;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadingCallback(!0),a=this.db.batch(),e.prev=2,o=t.groups.map((function(e){return e.groupName})),a.update(this.db.collection("subjects").doc(t.id),t),!(s&&o.length>0)){e.next=11;break}return e.next=8,this.db.collection("sessions").where("subjectName","==",t.subjectName).where("groupName","in",o).get();case 8:e.sent.docs.forEach((function(e){var t=e.data();t.id=e.id,t.room={name:"Sin Asignar",checkConcurrency:!1},t.teacher={name:"Sin Asignar",checkConcurrency:!1},a.update(i.db.collection("sessions").doc(t.id),t)}));case 11:a.commit().then((function(){i.loadingCallback(!1),n()})).catch((function(e){i.errorCallback(e)})),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(2);case 16:case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,n,s){return e.apply(this,arguments)}}()},{key:"updateSubjectName",value:function(e,t,n){var s=this;this.loadingCallback(!0),this.db.collection("sessions").where("subjectName","==",t).get().then((function(t){var a=s.db.batch();e.groups.forEach((function(t){t.subjectName=e.subjectName}));var o=s.db.collection("subjects").doc(e.id);a.set(o,e),t.forEach((function(t){var n=s.db.collection("sessions").doc(t.id);a.update(n,{subjectName:e.subjectName})})),a.commit().then((function(){s.loadingCallback(!1),n()})).catch((function(e){s.errorCallback(e)}))}))}},{key:"getSubjects",value:function(e){var t=this;this.loadingCallback(!1),this.db.collection("subjects").get().then((function(n){t.loadingCallback(!1);var s=[];n.forEach((function(e){var t=e.data();t.id=e.id,s.push(t)})),e(s)})).catch((function(e){console.log("ERROR"),console.log(e),t.errorCallback(e)}))}},{key:"createSubject",value:function(e,t){var n=this;e.owner=this.getUser().email,e.groups=[],this.db.collection("subjects").doc(e.subjectName).set(e).then((function(){t()})).catch((function(e){console.log("ERROR"),console.log(e),n.errorCallback(e)}))}},{key:"deleteSubject",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){var s,a,o,i,c=this;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.loadingCallback(!0),s=this.db.batch(),e.prev=2,a=t.groups.map((function(e){return e.groupName})),o=[],!(a.length>0)){e.next=12;break}return e.next=8,this.db.collection("sessions").where("subjectName","==",t.subjectName).where("groupName","in",a).get();case 8:e.sent.docs.forEach((function(e){var t=e.data();t.id=e.id,o.push(t)})),this.deleteSessionsBatch(t,o,s);case 12:i=this.db.collection("subjects").doc(t.id),s.delete(i),s.commit().then((function(){c.loadingCallback(!1),n()})).catch((function(e){c.errorCallback(e)})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.log("error delete subject: "+e.t0);case 20:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(e,t,n){var s=this;this.loadingCallback(!0);var a=this.db.batch();e.groups=e.groups.filter((function(e){return e.groupName!==t.groupName})),this.db.collection("sessions").where("subjectName","==",e.subjectName).where("groupName","==",t.groupName).get().then((function(t){var o=[];t.forEach((function(e){var t=e.data();t.id=e.id,o.push(t)})),s.deleteSessionsBatch(e,o,a),a.update(s.db.collection("subjects").doc(e.id),e),a.commit().then((function(){s.loadingCallback(!1),n()})).catch((function(e){s.errorCallback(e)}))}))}},{key:"deleteSessionsBatch",value:function(e,t,n){var s=this;t.forEach((function(t){s.deleteSessionBatch(t,e.semester,n)}))}},{key:"checkDisponibilityForSession",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n,s){var a,o,i,c,r;return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingCallback(!0),e.prev=1,e.next=4,this.db.collection("roomsOcupancy").doc(parseInt(n-1)%2+1+"-"+t.day).get();case 4:return a=e.sent,e.next=7,this.db.collection("teachersOcupancy").doc(parseInt(n-1)%2+1+"-"+t.day).get();case 7:o=e.sent,i=Qn(t),c=!0,r=!0,a=a.data(),o=o.data(),t.teacher.checkConcurrency&&i.forEach((function(e){c=c&&o[e].includes(t.teacher.name)})),t.room.checkConcurrency&&i.forEach((function(e){r=r&&a[e].includes(t.room.name)})),s({teacher:c,room:r}),this.loadingCallback(!1),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(1),s({teacher:!1,room:!1}),this.loadingCallback(!1),console.log("Error getting documents",e.t0);case 25:case"end":return e.stop()}}),e,this,[[1,20]])})));return function(t,n,s){return e.apply(this,arguments)}}()},{key:"initDB",value:function(){var e,t,n=this.db.batch(),s=this.db.collection("roomsOcupancy"),a=this.db.collection("teachersOcupancy"),o={};for(o.concurrents=[],e=1;e<53;e++)o[e]=[];for(t=1;t<3;t++){var i;for(i=1;i<8;i++)n.set(s.doc(t+"-"+i),o),n.set(a.doc(t+"-"+i),o)}n.commit().then((function(){})).catch((function(e){}))}}]),e}(),$n={test:Kn,local:function(){function e(t,n,s){Object(m.a)(this,e),this.baseurl=t,this.loadingCallback=n,this.errorCallback={},this.user=null,this.userIsLogged=s}return Object(p.a)(e,[{key:"logOut",value:function(e){this.user=null,e()}},{key:"auth",value:function(e,t,n){this.user={email:e},console.log(this.user),this.userIsLogged(this.user.email)}},{key:"getUser",value:function(){return this.user}},{key:"setErrorCallback",value:function(e){this.errorCallback=e}},{key:"getSessionById",value:function(e,t){this.loadingCallback(!0),console.log("http://20.86.179.242:4010/session/1"),fetch("http://example.com/movies.json").then((function(e){return e.json()})).then((function(e){return console.log(e)}))}},{key:"getRooms",value:function(e){var t=this;this.loadingCallback(!0),console.log(this.baseurl+"rooms"),fetch(this.baseurl+"rooms").then((function(e){return e.json()})).then((function(n){console.log("success"),console.log(n),t.loadingCallback(!1),e(n)}),(function(e){return console.log(e),t.loadingCallback(!1),null}))}},{key:"getTeachers",value:function(e){var t=this;this.loadingCallback(!0),console.log(this.baseurl+"teachers"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/teachers").then((function(e){return e.json()})).then((function(n){console.log("success"),console.log(n),t.loadingCallback(!1),e(n)}),(function(e){return console.log(e),t.loadingCallback(!1),null}))}},{key:"setLoadingCallback",value:function(e){this.loadingCallback=e}},{key:"getSubjectsOfTeacher",value:function(e,t){var n=this;this.loadingCallback(!0),console.log(this.baseurl+"subjects"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/subjects").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e),n.loadingCallback(!1),t(e)}),(function(e){return console.log(e),n.loadingCallback(!1),[]}))}},{key:"createTeacher",value:function(e,t){t()}},{key:"deleteTeacher",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAvailableTeachers",value:function(e,t,n,s){var a=this;this.loadingCallback(!0),console.log(this.baseurl+"teachers"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/teachers").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e);var t=[];e.map((function(e){return t.push({name:e.teacherName,checkConcurrency:e.checkConcurrency})})),a.loadingCallback(!1),s(t)}),(function(e){return console.log(e),a.loadingCallback(!1),null}))}},{key:"getAvailableRooms",value:function(e,t,n,s){var a=this;this.loadingCallback(!0),console.log(this.baseurl+"rooms"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/rooms").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e);var t=[];e.map((function(e){return t.push({name:e.roomName,checkConcurrency:e.checkConcurrency})})),a.loadingCallback(!1),s(t)}),(function(e){return console.log(e),a.loadingCallback(!1),null}))}},{key:"createRoom",value:function(e,t){t()}},{key:"deleteRoom",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadTitles",value:function(e){var t=this;this.loadingCallback(!0),console.log(this.baseurl+"titles"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/titles").then((function(e){return e.json()})).then((function(n){console.log("success"),console.log(n),t.loadingCallback(!1),e(n)}),(function(e){return console.log(e),t.loadingCallback(!1),[]}))}},{key:"createTitle",value:function(e,t){t()}},{key:"deleteTitle",value:function(e,t){t()}},{key:"loadSubjectsOfTitle",value:function(e,t){var n=this;this.loadingCallback(!0),console.log(this.baseurl+"subjects"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/subjects").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e),n.loadingCallback(!1),t(e)}),(function(e){return console.log(e),n.loadingCallback(!1),null}))}},{key:"loadSessionsOfSubjects",value:function(e,t){var n=this;this.loadingCallback(!0),console.log(this.baseurl+"sessions"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/sessions").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e),n.loadingCallback(!1),t(e)}),(function(e){return console.log(e),n.loadingCallback(!1),null}))}},{key:"getSessionsOfTeacher",value:function(e,t){var n=this;this.loadingCallback(!0),console.log(this.baseurl+"sessions"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/sessions").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e),n.loadingCallback(!1),t(e)}),(function(e){return console.log(e),n.loadingCallback(!1),null}))}},{key:"getSessionsOfSubjectGroup",value:function(e,t,n){var s=this;this.loadingCallback(!0),console.log(this.baseurl+"sessions"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/sessions").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e),s.loadingCallback(!1),n(e)}),(function(e){return console.log(e),s.loadingCallback(!1),null}))}},{key:"getSessionsOfRoom",value:function(e,t){var n=this;this.loadingCallback(!0),console.log(this.baseurl+"sessions"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/sessions").then((function(e){return e.json()})).then((function(e){console.log("success"),console.log(e),n.loadingCallback(!1),t(e)}),(function(e){return console.log(e),n.loadingCallback(!1),null}))}},{key:"updateSession",value:function(e,t,n){t()}},{key:"createSession",value:function(e,t,n){t()}},{key:"deleteSession",value:function(e,t,n){t()}},{key:"updateSubject",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n,s){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}()},{key:"updateSubjectName",value:function(e,t,n){n()}},{key:"getSubjects",value:function(e){var t=this;this.loadingCallback(!0),console.log(this.baseurl+"subjects"),fetch("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/subjects").then((function(e){return e.json()})).then((function(n){console.log("success"),console.log(n),t.loadingCallback(!1),e(n)}),(function(e){return console.log(e),t.loadingCallback(!1),null}))}},{key:"createSubject",value:function(e,t){t()}},{key:"deleteSubject",value:function(){var e=Object(Re.a)(De.a.mark((function e(t,n){return De.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(e,t,n){n()}},{key:"checkDisponibilityForSession",value:function(e,t,n){n({teacher:!0,room:!0})}}]),e}(),dev:Yn,pro:Yn},es=function(){function e(t,n,s){Object(m.a)(this,e),this.user=null,this.dataSource=new(this.getDataSource(s))("http://localhost:8080/rest/TFG-Calendar-REST/1.0.0/",t,n)}return Object(p.a)(e,[{key:"logOut",value:function(e){this.dataSource.logOut(e)}},{key:"auth",value:function(e,t,n){this.dataSource.auth(e,t,n)}},{key:"getUser",value:function(){return this.dataSource.getUser()}},{key:"getDataSource",value:function(e){return e in $n?$n[e]:console.warn("NO DATA SOURCE")}},{key:"setLoadingCallback",value:function(e){this.dataSource.setLoadingCallback(e)}},{key:"setErrorCallback",value:function(e){this.dataSource.setErrorCallback(e)}},{key:"getSubjects",value:function(e){this.dataSource.getSubjects(e)}},{key:"getTeachers",value:function(e){this.dataSource.getTeachers(e)}},{key:"createTeacher",value:function(e,t){this.dataSource.createTeacher(e,t)}},{key:"deleteTeacher",value:function(e,t){this.dataSource.deleteTeacher(e,t)}},{key:"getAvailableTeachers",value:function(e,t,n,s){this.dataSource.getAvailableTeachers(e,t,n,s)}},{key:"getRooms",value:function(e){this.dataSource.getRooms(e)}},{key:"createRoom",value:function(e,t){this.dataSource.createRoom(e,t)}},{key:"deleteRoom",value:function(e,t){this.dataSource.deleteRoom(e,t)}},{key:"getAvailableRooms",value:function(e,t,n,s){this.dataSource.getAvailableRooms(e,t,n,s)}},{key:"loadTitles",value:function(e){this.dataSource.loadTitles(e)}},{key:"loadSubjectsOfTitle",value:function(e,t){this.dataSource.loadSubjectsOfTitle(e,t)}},{key:"loadSessionsOfSubjects",value:function(e,t){this.dataSource.loadSessionsOfSubjects(e,t)}},{key:"updateSession",value:function(e,t,n){this.dataSource.updateSession(e,t,n)}},{key:"createSession",value:function(e,t,n){this.dataSource.createSession(e,t,n)}},{key:"deleteSession",value:function(e,t,n){this.dataSource.deleteSession(e,t,n)}},{key:"createSubject",value:function(e,t){this.dataSource.createSubject(e,t)}},{key:"deleteSubject",value:function(e,t){this.dataSource.deleteSubject(e,t)}},{key:"deleteGroup",value:function(e,t,n){this.dataSource.deleteGroup(e,t,n)}},{key:"updateSubject",value:function(e,t,n){this.dataSource.updateSubject(e,t,n)}},{key:"loadSessionsOfSubjectGroup",value:function(e,t,n){this.dataSource.getSessionsOfSubjectGroup(e,t,n)}},{key:"updateSubjectName",value:function(e,t,n){this.dataSource.updateSubjectName(e,t,n)}},{key:"checkDisponibilityForSession",value:function(e,t,n){this.dataSource.checkDisponibilityForSession(e,t,n)}},{key:"createTitle",value:function(e,t){this.dataSource.createTitle(e,t)}},{key:"deleteTitle",value:function(e,t){this.dataSource.deleteTitle(e,t)}}]),e}(),ts=function(e){Object(y.a)(n,e);var t=Object(x.a)(n);function n(e){var s;Object(m.a)(this,n),(s=t.call(this,e)).userIsLogged=s.userIsLogged.bind(Object(v.a)(s)),s.setLoading=s.setLoading.bind(Object(v.a)(s));var a=e.env?e.env:"pro".trimEnd();return s.state={repository:new es(s.setLoading,s.userIsLogged,a),email:"",password:"",loggedUser:!1,loading:!1},s.logOut=s.logOut.bind(Object(v.a)(s)),s}return Object(p.a)(n,[{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"logOut",value:function(){var e=this;this.state.repository.logOut((function(){e.userIsLogged(!1)}))}},{key:"userIsLogged",value:function(e){this.setState({loggedUser:e})}},{key:"render",value:function(){var e=this;return Object(ve.jsx)(dt.Provider,{value:this.state.repository,children:Object(ve.jsxs)(S.a,{id:"App",children:[Object(ve.jsx)(Ee,{hist:this.props.hist,loggedUser:this.state.loggedUser}),Object(ve.jsx)(g.d,{id:"page-wrap",children:this.state.loggedUser?Object(ve.jsxs)(h.a.Fragment,{children:[Object(ve.jsx)(g.b,{path:"/Horario",render:function(){return Object(ve.jsx)(Xt,{})}}),Object(ve.jsx)(g.b,{path:"/Asignaturas",component:Rn}),Object(ve.jsx)(g.b,{path:"/Aulas",component:Vn}),Object(ve.jsx)(g.b,{path:"/Profesores",component:Jn}),Object(ve.jsx)(g.b,{path:"/Usuario",render:function(){return Object(ve.jsx)(Un,{loggedUser:e.state.loggedUser,logOut:e.logOut})}}),Object(ve.jsx)(g.b,{path:"/Titulaciones",component:_n})]}):Object(ve.jsx)(g.b,{path:"/Login",render:function(){return Object(ve.jsx)(zn,{history:e.props.hist,loggedUser:e.state.loggedUser})}})}),this.state.loggedUser?Object(ve.jsx)(g.a,{to:"/Horario"}):Object(ve.jsx)(g.a,{to:"/Login"})]})})}}]),n}(h.a.Component);var ns=function(){var e=Object(g.g)(),t="pro".trimEnd();return Object(ve.jsx)(ts,{hist:e,env:t})},ss=Object(ve.jsx)(ns,{name:"Kiwi"});f.a.render(ss,document.getElementById("root")),j()}},[[83,1,2]]]);
//# sourceMappingURL=main.fe5b1df2.chunk.js.map